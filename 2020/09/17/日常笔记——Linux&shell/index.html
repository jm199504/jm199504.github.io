<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>日常笔记——Linux&amp;shell | Jimmy&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="概述：日常笔记——Linux&amp;shell">
<meta property="og:type" content="article">
<meta property="og:title" content="日常笔记——Linux&amp;shell">
<meta property="og:url" content="http://example.com/2020/09/17/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Linux&shell/index.html">
<meta property="og:site_name" content="Jimmy&#39;s blog">
<meta property="og:description" content="概述：日常笔记——Linux&amp;shell">
<meta property="og:locale">
<meta property="og:image" content="http://example.com/images/linux/specialpoint.png">
<meta property="article:published_time" content="2020-09-17T15:21:12.789Z">
<meta property="article:modified_time" content="2021-04-01T05:35:11.519Z">
<meta property="article:author" content="Jimmy Guo">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/linux/specialpoint.png">
  
    <link rel="alternate" href="/atom.xml" title="Jimmy's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jimmy&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Buscar"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Buscar"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-日常笔记——Linux&amp;shell" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/09/17/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Linux&shell/" class="article-date">
  <time class="dt-published" datetime="2020-09-17T15:21:12.789Z" itemprop="datePublished">2020-09-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      日常笔记——Linux&amp;shell
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>概述：日常笔记——Linux&amp;shell</p>
<span id="more"></span>

<h3 id="1-文件系统目录结构"><a href="#1-文件系统目录结构" class="headerlink" title="1.文件系统目录结构"></a>1.文件系统目录结构</h3><p>“一切皆为文件”</p>
<p>​    /dev 管理设备（cpu、disk、dvd、usb等）</p>
<p>​    /media 目录，linux自动识别设备，例如U盘、光驱，识别后的设备挂载到该目录</p>
<p>​    /bin 最常使用的命令（Binary） /usr/bin;/usr/local/bin</p>
<p>​    /sbin 系统管理员使用的系统管理程序（Super User) /usr/sbin;/usr/local/sbin</p>
<p>​    /home 存放普通用户主目录，每一个用户都有自己的目录，通常以用户名命令</p>
<p>​    /root 系统管理员/超级权限者的用户主目录</p>
<p>​    /lib 系统开机需要的动态连接共享库，类似于windows的dll文件，几乎所有应用程序都涉及该部分的共享库</p>
<p>​    /lost+found 该目录通常为空的，当系统非法关机后，会存放一些文件</p>
<p>​    /etc 所有系统管理所需要的的配置文件和子目录</p>
<p>​    /usr 用户大多数应用程序和文件，类似于windows的program file目录</p>
<p>​    /boot 存放启动linux的核心文件，包括连接文件和镜像文件</p>
<p>​    /proc 虚拟目录，系统内存的映射，获取系统信息</p>
<p>​    /srv 服务启动后所提取的数据（service）——不动</p>
<p>​    /sys linux2.6内核的变化，安装2.6内核新出现文件系统sysfs</p>
<p>​    /tmp 临时文件</p>
<p>​    /mnt 用户临时挂载别的文件系统，将外部存储挂载在/mnt，可以查看具体内容</p>
<p>​    /opt 主机额外安装软件的目录，例如按照oracle数据库可存放在该目录（安装包）</p>
<p>​    /usr/local 给主机额外安装软件的目录，通过编译源码方式安装的程序（/usr/local/mysql）</p>
<p>​    /var 存放不断扩充的或频繁修改的文件/目录以及日志文件</p>
<p>​    /selinux SELinux是一种安全子系统，可控制程序仅访问指定文件（security-enhanced linux）</p>
<h3 id="2-远程连接"><a href="#2-远程连接" class="headerlink" title="2.远程连接"></a>2.远程连接</h3><p>linux需要开启一个sshd服务（端口：22）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">servie sshd start</span><br></pre></td></tr></table></figure>

<p>查看服务是否开启</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setup</span><br></pre></td></tr></table></figure>

<h3 id="3-vi-vim的使用"><a href="#3-vi-vim的使用" class="headerlink" title="3.vi/vim的使用"></a>3.vi/vim的使用</h3><p>命令模式&lt;==Esc==一般模式/正常==i或者a==&gt;编辑模式</p>
<p>命令模式：</p>
<p>（1）保存并退出——:wq</p>
<p>（2）退出——:q</p>
<p>（3）设置/取消行号——:set nu 和 :set nonu</p>
<p>（4）跳到指定第n行——:set ；n；shitf+g</p>
<h3 id="4-关机、重启、注销"><a href="#4-关机、重启、注销" class="headerlink" title="4.关机、重启、注销"></a>4.关机、重启、注销</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">shutdown</span><br><span class="line">	shutdown -h 立即关机</span><br><span class="line">	shutdown -h 1:1分钟后关机</span><br><span class="line">	shutdown -r now:立即重启</span><br><span class="line">halt：关机</span><br><span class="line">reboot：重启</span><br><span class="line">syn：把内存数据同步到磁盘上</span><br><span class="line">logout:注销（图形界面无效）</span><br></pre></td></tr></table></figure>

<h3 id="5-用户管理"><a href="#5-用户管理" class="headerlink" title="5.用户管理"></a>5.用户管理</h3><p>创建用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd 用户名</span><br></pre></td></tr></table></figure>

<p>成功会自动创建与用户名相同的目录（在/home），也可以通过以下命令指定目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -d 指定目录 新用户</span><br></pre></td></tr></table></figure>

<p>修改密码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd 用户名</span><br></pre></td></tr></table></figure>

<p>删除用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">userdel 用户名：删除用户</span><br><span class="line">userdel -r 用户名 ：删除用户及目录</span><br></pre></td></tr></table></figure>

<p>查看用户信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id 用户名</span><br></pre></td></tr></table></figure>

<p>切换用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su -用户名</span><br></pre></td></tr></table></figure>

<p>添加组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd 组名</span><br></pre></td></tr></table></figure>

<p>删除组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupdel 组名</span><br></pre></td></tr></table></figure>

<p>增加用户指定组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -g 用户组 用户名</span><br></pre></td></tr></table></figure>

<p>修改用户指定组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -g 用户组 用户名</span><br></pre></td></tr></table></figure>

<p>用户信息会存放在：/etc/passwd</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">用户名：x（密码）：numb1（用户id）：numb2（组id）：&#x2F;home&#x2F;用户名(用户目录)：&#x2F;bin&#x2F;bash（shell）</span><br></pre></td></tr></table></figure>

<p>组配置文件会存放在：/etc/group</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">组名：x（口令）：num（组id）：[组内用户名]</span><br></pre></td></tr></table></figure>

<p>口令和密码配置文件（加密）：/etc/shadow</p>
<h3 id="6-密码重置"><a href="#6-密码重置" class="headerlink" title="6.密码重置"></a>6.密码重置</h3><p>（1）指定运行级别：</p>
<p>0：关机</p>
<p>1：单用户（找回丢失密码）</p>
<p>2：多用户状态（无网络服务）</p>
<p>3：多用户状态（有网络服务）</p>
<p>4：系统未使用（保留）</p>
<p>5：图形界面</p>
<p>6：系统重启</p>
<p>常用运行级别：3和5，修改默认运行级别</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;etc&#x2F;inittab的id:5:initdefault的级别数</span><br></pre></td></tr></table></figure>

<p>或者命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">init [0123455]</span><br></pre></td></tr></table></figure>

<p>（2）找回root密码</p>
<p>a.重启进入menu（Press any key to entre the menu）</p>
<p>b.输入‘e’ ，’e‘ to edit the commands befor booting</p>
<p>c.光标kernel / vmlinuz - 2.6输入’e’</p>
<p>d.添加1==&gt;entre（’单用户级别’）</p>
<p>e.输入‘b’（boot）===&gt;（‘以root登录单用户模式’）</p>
<h3 id="7-帮助命令"><a href="#7-帮助命令" class="headerlink" title="7.帮助命令"></a>7.帮助命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">help 命令</span><br><span class="line">man 命令</span><br></pre></td></tr></table></figure>

<h3 id="8-文件目录命令"><a href="#8-文件目录命令" class="headerlink" title="8.文件目录命令"></a>8.文件目录命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ls ：显示当前目录的文件及子目录</span><br><span class="line">	ls -a ：显示当前目录所有文件及子目录（含隐藏，以.开头的文件）</span><br><span class="line">	ls -l ：以列表形式显示</span><br><span class="line">	ls -h:显示大小</span><br><span class="line">mkdir 目录名：创建目录</span><br><span class="line">	mkdir -p 创建多层目录</span><br><span class="line">pwd：显示当前目录</span><br><span class="line">rmdir:删除空目录</span><br><span class="line">	rm -rf 目录：删除非空目录</span><br><span class="line">touch 文件名：创建文件</span><br><span class="line">touch 文件名1 文件名2 ...：创建多个文件</span><br><span class="line">cp 文件原目录路径 文件新目录路径：复制文件到指定目录</span><br><span class="line">	cp -r 原目录路径 新目录路径：递归复制目录 所有文件</span><br><span class="line">mv 文件名：移动&#x2F;重命名</span><br><span class="line">cat 文件名：查看文件</span><br><span class="line">	cat -n：显示行号</span><br><span class="line">	cat -n 文件名 | more：cat打开并分页显示</span><br><span class="line">		space：下一页</span><br><span class="line">		Enter：下一行</span><br><span class="line">		q：离开</span><br><span class="line">		Ctrl+f:下一屏</span><br><span class="line">		Ctrl+b:上一屏</span><br><span class="line">	less:分屏查看文件内容，对大文件具有叫高效率</span><br></pre></td></tr></table></figure>

<h3 id="9-写入指令"><a href="#9-写入指令" class="headerlink" title="9.写入指令"></a>9.写入指令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">指令 &gt; 文件：写入</span><br><span class="line">ls -l &gt; a.txt ：将ls -l的结果写入a.txt</span><br><span class="line">cat &#x2F;etc&#x2F;profile &gt; c.txt ：将profile文件写入a.txt</span><br><span class="line"></span><br><span class="line">指令 &gt;&gt; 文件：追加写入</span><br><span class="line">ls -l &gt;&gt; b.txt ：将ls -l的结果追加写入b.txt</span><br><span class="line"></span><br><span class="line">echo &quot;内容&quot; &gt; 文件：</span><br><span class="line">echo &quot;hello&quot; &gt;&gt; c.txt：将字符串写入文件</span><br><span class="line">echo &quot;hello&quot; &gt;&gt; c.txt：追加字符串写入文件</span><br><span class="line"></span><br><span class="line">echo指令：</span><br><span class="line">	echo [选项] [输出内容]</span><br><span class="line">	echo $PATH：echo 输出环境变量</span><br><span class="line">head指令：</span><br><span class="line">	head -n 5 文件：查看前5行数据（默认10行）</span><br><span class="line">tail指令：</span><br><span class="line">	tail -n 5 文件：查看后5行数据</span><br><span class="line">	tail -f 文件：实时追踪文档更新</span><br><span class="line">ln指令：</span><br><span class="line">	软链接（符号链接），类似于windows的快捷方式</span><br><span class="line">	ln -s [原文件&#x2F;目录] [软连接名]</span><br><span class="line">history：查看已执行历史命令</span><br><span class="line">	history n:查看最近n个命令</span><br></pre></td></tr></table></figure>

<p>10.时间日期类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">date:显示当前时间</span><br><span class="line">date +%Y:当前年份</span><br><span class="line">date +%m:当前月份</span><br><span class="line">date +%d:当前具体日</span><br><span class="line">date &quot;+%Y-%m-%d %H:%M:%S&quot;:当前具体时间 </span><br></pre></td></tr></table></figure>

<p>11.搜索查找类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">find [搜索范围] [选项]</span><br><span class="line">	find 目录 -name 文件名</span><br><span class="line">		eg：find &#x2F;home -name a.txt</span><br><span class="line">	find 目录 -user 用户名</span><br><span class="line">		eg: find &#x2F;home -user tom</span><br><span class="line">	查找整个系统中大于&#x2F;小于&#x2F;等于20M的文件：（或者k）</span><br><span class="line">		find 目录 -size +&#x2F;-&#x2F;20M</span><br><span class="line">	find 目录 -name *.txt：支持通配符</span><br><span class="line">	</span><br><span class="line">locate 快速定位文件路径，查找速度更快，管理员需定期更新locate时刻（保证准确性，需要提前建立locate数据库）</span><br><span class="line">（1）新建locate数据库：updatedb</span><br><span class="line">（2）locate hello.txt</span><br><span class="line"></span><br><span class="line">grep指令和管道符号 |</span><br><span class="line">grep过滤查找，管道费&quot;|&quot;表示将前一个命令的处理结果传递给后面的指令</span><br><span class="line">grep [选项] 查找内容 源文件</span><br><span class="line">常用选项：</span><br><span class="line">-n 显示匹配行和行号；</span><br><span class="line">-i 忽略字母大小写</span><br><span class="line">eg.在hello.txt查找&quot;yes&quot;的所在行</span><br><span class="line">	cat hello.txt | grep -n yes	区分大小写</span><br><span class="line">	cat hello.txt | grep -ni yes 不区分大小写</span><br></pre></td></tr></table></figure>

<h3 id="10-压缩-解压缩指令"><a href="#10-压缩-解压缩指令" class="headerlink" title="10.压缩/解压缩指令"></a>10.压缩/解压缩指令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">gzip &#x2F;gunzip</span><br><span class="line">	gzip 压缩文件；gunzip 解压缩</span><br><span class="line">	gzip 文件：压缩至*.gz</span><br><span class="line"></span><br><span class="line">zip&#x2F;unzip</span><br><span class="line">	zip -r 递归压缩</span><br><span class="line">	unzip -d 目录 压缩文件：指定压缩目录</span><br><span class="line"></span><br><span class="line">tar</span><br><span class="line">	tar -c 产生.tar打包文件</span><br><span class="line">	tar -v 显示详细信息</span><br><span class="line">	tar -f 指定压缩后的文件名</span><br><span class="line">	tar -z 打包压缩</span><br><span class="line">	-x 解包.tar文件</span><br><span class="line">	eg.压缩多个文件：tar -zcvf a.tar.gz a1.txt a2.txt</span><br><span class="line">	eg.将&#x2F;home文件夹压缩到myhome.tar.gz：tar -zcvf myhome.tar.gz &#x2F;home&#x2F;</span><br><span class="line">	eg.将a.tar.gz解压至当前目录：tar -zxvf a.tar.gz</span><br><span class="line">	eg.将myhome.tar.gz解压到&#x2F;opt&#x2F;tmp2目录：tar -zxvf myhome.tar.gz -C &#x2F;opt&#x2F;tmp2（注意有-C的参数）</span><br></pre></td></tr></table></figure>

<h3 id="11-组管理和权限管理"><a href="#11-组管理和权限管理" class="headerlink" title="11.组管理和权限管理"></a>11.组管理和权限管理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">查看文件所有者：ls -ahl</span><br><span class="line"></span><br><span class="line">修改文件所有者：chown 用户名 文件名</span><br><span class="line">修改目录下所有文件所有者：chown -R 用户名 目录</span><br><span class="line"></span><br><span class="line">组的创建：groupadd 组名</span><br><span class="line"></span><br><span class="line">修改文件所在组：chgrp 组名 文件名</span><br><span class="line"> </span><br><span class="line">修改文件所有者+所在组：chown 用户名:组名 文件名</span><br><span class="line"> </span><br><span class="line">修改用户所在组：usermod -g 组名 用户名</span><br><span class="line">修改用户登录初始目录：usermod -d 目录名 用户名</span><br><span class="line"></span><br><span class="line">-rw-r--r--. 1 tom police 6</span><br><span class="line">第0位(-)：-普通文件；d目录；l软连接；c字符设备（键盘&#x2F;鼠标）;b块文件（硬盘）</span><br><span class="line">第1,2,3位(rw-)：文件所有者权限r表读w表写</span><br><span class="line">第4,5,6位(r--)：文件所在组用户权限</span><br><span class="line">第7,8,9位(r--)：文件其他组用户权限</span><br><span class="line">1若表示文件则是硬链接；目录则是子目录的数量（注意所有文件夹会多2个子目录树，分别为.和..）</span><br><span class="line">6表示文件大小（字节数）目录则是4096</span><br><span class="line">rwx：其中x表示可执行（文件），表示可进入该目录（目录），其中w表示可写，注意删除文件时，必须要对文件所在目录具备写权限</span><br><span class="line"></span><br><span class="line">修改文件&#x2F;目录权限：</span><br><span class="line">u所有者；g所有组；o其他人；a所有人</span><br><span class="line">chmod u&#x3D;rwx,g&#x3D;rx,o&#x3D;x</span><br><span class="line">chmod o+w</span><br><span class="line">chmod a-x</span><br><span class="line">规则：r&#x3D;4;w&#x3D;2;x&#x3D;1</span><br><span class="line">chmod u&#x3D;rwx,g&#x3D;rx,o&#x3D;x</span><br><span class="line">&#x3D;chmod 751</span><br></pre></td></tr></table></figure>

<h3 id="12-任务调度"><a href="#12-任务调度" class="headerlink" title="12.任务调度"></a>12.任务调度</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">crontab：进行定时任务的设置</span><br><span class="line">任务调度：指系统在某个时间执行特定命令</span><br><span class="line">任务调度分类：</span><br><span class="line">	1、系统工作：有些重要的工作重复执行</span><br><span class="line">	2、个别用户工作</span><br><span class="line">常用选项</span><br><span class="line">	-e 编辑crontab定时任务</span><br><span class="line">	-l 查询crontab任务</span><br><span class="line">	-r 删除当前用户所有的crontab任务</span><br><span class="line"></span><br><span class="line">样例：</span><br><span class="line">设置任务调度文件：&#x2F;etc&#x2F;crontab</span><br><span class="line">设置个人任务调度，（1）执行 crontab -e 命令</span><br><span class="line">输入任务到调度文件，（2）执行 *&#x2F;1**** ls -l&#x2F;etc&#x2F;&gt;tmp&#x2F;to.txt</span><br><span class="line">即每小时的每分钟执行 ls -l &#x2F;etc&#x2F; &gt; &#x2F;tmp&#x2F;to.txt 命令</span><br><span class="line"></span><br><span class="line">占位符说明：</span><br><span class="line">第1个&quot;*&quot;:一小时中第几分钟（范围0-59）</span><br><span class="line">第2个&quot;*&quot;:一天中第几小时（范围0-23）</span><br><span class="line">第3个&quot;*&quot;:一月中第几天（范围1-31）</span><br><span class="line">第4个&quot;*&quot;:一年中第几月（范围1-12）</span><br><span class="line">第5个&quot;*&quot;:一周中的星期几（范围0-7）</span><br><span class="line"></span><br><span class="line">*：表示任何时间，例如第1个&quot;*&quot;表示一小时每一个分钟都执行一次</span><br><span class="line">，：表示不连续时间，例如 &quot;0 8,12,16 * * * &quot;表示第8个小时0分钟，12个小时0分钟...</span><br><span class="line">-：表示连续时间，例如&quot;0 5 * * 1-6&quot;表示周一到周六的凌晨5点执行</span><br><span class="line">*&#x2F;n：表示每隔多久执行一次。例如&quot;*&#x2F;10 * * *&quot;表示每隔10分钟执行一次</span><br></pre></td></tr></table></figure>

<p><img src="/images/linux/specialpoint.png"></p>
<p><strong>实例1：每隔一分钟，将当前日期信息追加到/tmp/mydate文件</strong></p>
<p>（1）编写 /home/mytask1.sh</p>
<p>​    文件内容：date &gt;&gt; /tmp/mydate</p>
<p>（2）赋予mytask1.sh执行权限（chmod 744 /home//mytask1.sh）</p>
<p>（3）crontab -e</p>
<p>（4）*/1 * * * * /home/mytask1.sh</p>
<p><strong>实例2：每天凌晨2：00将mysql数据库test.db备份到mydb.bak</strong></p>
<p>（1）编写/home/mytaks2.sh</p>
<p>​    文件内容：/usr/local/mysql/bin/mysqldump -u 用户名 -p密码 testdb &gt; /tmp/mydb.bak</p>
<p>（2）赋予mytask2.sh执行权限（chmod 744 /home//mytask2.sh）</p>
<p>（3）crontab -e</p>
<p>（4）0 2 * * * * /home/mytask2.sh</p>
<p>crond相关指令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">crontab -l 显示</span><br><span class="line">crontab -r 终止所有任务调度</span><br><span class="line">service crond restart [重启任务调度]</span><br></pre></td></tr></table></figure>

<h3 id="13-磁盘分区"><a href="#13-磁盘分区" class="headerlink" title="13.磁盘分区"></a>13.磁盘分区</h3><p>（1）mbr分区：</p>
<p>a.最多支持4个主分区</p>
<p>b.系统仅能安装在主分区</p>
<p>c.扩展分区占1个主分区</p>
<p>d.mbr最大支持2TB，兼容性较好</p>
<p>（2）gtp分区</p>
<p>a.支持无限多个主分区（windows下仅支持128个分区）</p>
<p>b.最大支持18EB大容量（EB=1024PB,PB=1024TB）</p>
<p>c.window7 64后支持gtp</p>
<p><strong>windows下的磁盘分区</strong></p>
<p>主分区（primary partition）</p>
<p>扩展分区（extended partition）：n个逻辑分区（logical）</p>
<p><strong>linux分区</strong></p>
<p>a.仅存在一个根目录（独立且唯一）</p>
<p>b.采用“载入”的处理方法，整个文件系统包含了一整套的文件和目录，将一个分区和目录联系，要载入的分区将它的存储空间在一个目录下获得</p>
<p>硬盘说明：</p>
<p>a.linux硬盘分IDE硬盘和SCSI硬盘，主流SCSI硬盘</p>
<p>b.对于IDE硬盘，驱动器标识符为“hdx<del>”，其中”hd”表示分区所在设备的类型，指IDE硬盘，“x”为盘号（a为基础盘；b为基础从属盘；c为辅助硬盘；d为辅助从属盘，“</del>”代表分区，前四个分区用数字1-4表示，是主分区或者扩展分区，5开始为逻辑分区，例如hda3表示第1个IDE硬盘上的第3个主分区或者扩展分区，hdb2表示为第2个IDE硬盘上的第2个主分区或者扩展分区）</p>
<p>c.对于SCSI硬盘标识为“sdx~”，SCSI硬盘使用“sd”表示分区所在设备的类型，其余与IDE硬盘表示一致。</p>
<p>查看系统分区和挂载情况</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">lsblk -f</span><br><span class="line"></span><br><span class="line">分区情况(sda1,sda2...);</span><br><span class="line">分区类型（ext4,swap...）;</span><br><span class="line">标识符（唯一的40位字符串）;</span><br><span class="line">挂载点（&#x2F;boot,SWAP...）</span><br><span class="line"></span><br><span class="line">lsblk 可直接查看磁盘大小</span><br></pre></td></tr></table></figure>

<p>※ SWAP：当系统的物理内存不够用的时候，就需要将物理内存中的一部分空间释放出来，以供当前运行的程序使用。那些被释放的空间可能来自一些很长时间没有什么操作的程序，这些被释放的空间被临时保存到Swap空间中。</p>
<p>挂载：在linux系统中增加一个新的硬盘，并挂载到/home/newdisk</p>
<p><strong>步骤：</strong></p>
<p>a.添加硬盘</p>
<p>b.分区</p>
<p>c.格式化</p>
<p>d.挂载</p>
<p>e.设置自动挂载</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">添加硬盘：</span><br><span class="line">1)虚拟机&gt;设置&gt;硬盘&gt;SCSI&gt;创建新的虚拟磁盘&gt;分配2GB,拆分成多个文件</span><br><span class="line">2)reboot</span><br><span class="line">3)lsblk（老师不离开...）查看到新的sdb</span><br><span class="line"></span><br><span class="line">分区：</span><br><span class="line">4)fdisk &#x2F;dev&#x2F;sbd：创建和维护分区表的程序</span><br><span class="line">	command m &gt;add add new partition n&gt; primary partition p&gt;partition number 1&gt; write table to disk and exit w</span><br><span class="line">5)lsblk -f检查发现sdb不具备标识符等</span><br><span class="line"></span><br><span class="line">格式化：</span><br><span class="line">6)mkfs -t  ext4 &#x2F;dev&#x2F;sdb1：格式化</span><br><span class="line"></span><br><span class="line">挂载：</span><br><span class="line">7)mkdir &#x2F;home&#x2F;newdisk：创建</span><br><span class="line">8)mount &#x2F;dev&#x2F;sdb1 &#x2F;home&#x2F;newdisk ：挂载</span><br><span class="line"></span><br><span class="line">设置自动挂载：</span><br><span class="line">9)vim &#x2F;etc&#x2F;fstab</span><br><span class="line">在UUID&#x3D;...上一行添加一行：</span><br><span class="line">&#x2F;dev&#x2F;sdb1	&#x2F;home&#x2F;newdisk	ext4	defaults 0 0</span><br><span class="line">mount -a </span><br><span class="line">10)reboot</span><br><span class="line"></span><br><span class="line">卸载：</span><br><span class="line">umount &#x2F;dev&#x2F;sdb1 或者 umount &#x2F;newdisk</span><br></pre></td></tr></table></figure>

<p>磁盘整体使用情况：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -lh</span><br></pre></td></tr></table></figure>

<p>查询指定目录的磁盘占用情况：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -h &#x2F;目录</span><br></pre></td></tr></table></figure>

<p>-s 指定目录占用大小汇总</p>
<p>-h 带计量单位</p>
<p>-a 含文件</p>
<p>–max-depth=1 子目录深度</p>
<p>-c 列出明细和增加汇总值</p>
<p><strong>实例：查看/opt目录磁盘占用情况，子目录深度1</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -ach --max-depth&#x3D;1 &#x2F;opt</span><br></pre></td></tr></table></figure>

<p><strong>统计/home文件夹下文件个数：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l &#x2F;home | grep &quot;^-&quot; | wc -l</span><br></pre></td></tr></table></figure>

<p><strong>统计/home目录个数：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l &#x2F;home | grep &quot;^d&quot; | wc -l</span><br></pre></td></tr></table></figure>

<p><strong>统计/home文件夹下文件及子文件内的数量：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -lR &#x2F;home | grep &quot;^-&quot; | wc -l</span><br></pre></td></tr></table></figure>

<p><strong>树状显示目录：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install tree（提示：ubuntu用apt-get）</span><br><span class="line">tree</span><br></pre></td></tr></table></figure>

<h3 id="14-网络配置"><a href="#14-网络配置" class="headerlink" title="14.网络配置"></a>14.网络配置</h3><p>linux网络配置原理图（含虚拟机）</p>
<p>目前采用是NAT模式</p>
<p>（1）查看虚拟网络编辑器\和修改ip地址（修改虚拟网卡）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VMware &gt; 编辑 &gt; 虚拟网络编辑器</span><br></pre></td></tr></table></figure>

<p>（2）配置自动连接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">linux界面&gt;系统&gt;首选项&gt;网络连接&gt; System eth0 &gt; 自动连接</span><br><span class="line">reboot</span><br><span class="line">※ 该种方式为dhcp模式，即每次ip地址不保证相同</span><br></pre></td></tr></table></figure>

<p>（3）指定固定ip地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-eth0</span><br><span class="line">BOOTPROTO&#x3D;&quot;static&quot;</span><br><span class="line">IPADDR&#x3D;192.168.1.80</span><br><span class="line">GATEWAY&#x3D;&quot;192.168.1.1&quot;</span><br><span class="line">NETMASK&#x3D;&quot;255.255.255.0&quot;</span><br><span class="line">ONBOOT&#x3D;yes&#x2F;&#x2F;注意为yes</span><br><span class="line"></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>

<h3 id="15-进程和服务"><a href="#15-进程和服务" class="headerlink" title="15.进程和服务"></a>15.进程和服务</h3><p>（1）linux每一个执行的程序/代码都是一进程（配ID）</p>
<p>（2）每一个进程对应一父进程，父进程可复制多个子进程，例如www服务器</p>
<p>（3）每一进程有2种方式存在（前台，后台）</p>
<p>（4）一般系统服务以后台进程存在，常驻系统中直至关机</p>
<p>查看进程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ps -aux</span><br><span class="line">	-a：显示终端所有进程信息</span><br><span class="line">	-u：以用户格式显示信息</span><br><span class="line">	-x：显示后台进程运行的参数</span><br><span class="line"></span><br><span class="line">ps -ef | more</span><br><span class="line">	查看PPID（父进程）</span><br><span class="line">	-e：显示所有进程</span><br><span class="line">	-f:全格式</span><br><span class="line">	</span><br><span class="line">USER：用户名</span><br><span class="line">PID:进程id</span><br><span class="line">%CPU:占用cpu</span><br><span class="line">%MEM:占用内存</span><br><span class="line">VSZ :使用虚拟内存（KB）</span><br><span class="line">RSS :使用物理内存情况（KB）</span><br><span class="line">TTY :使用的终端</span><br><span class="line">STAT :状态（s休眠；r运行）</span><br><span class="line">START :开始时间</span><br><span class="line">TIME ：总时间</span><br><span class="line">COMMAND：命令行</span><br></pre></td></tr></table></figure>

<p>查看sshd服务（远程登录服务）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -aux | grep sshd</span><br></pre></td></tr></table></figure>

<p>终止进程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill [选项] 进程号</span><br></pre></td></tr></table></figure>

<p>终止多个gedit编辑器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall gedit</span><br></pre></td></tr></table></figure>

<p> 强制终止</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 pid</span><br></pre></td></tr></table></figure>

<p>查看进程树</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pstree</span><br><span class="line">	-p:显示pid</span><br><span class="line">	-u:显示所属用户</span><br></pre></td></tr></table></figure>

<p>服务管理指令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service 服务名 [start|stop|restart|reload|status]</span><br></pre></td></tr></table></figure>

<p>查看防火墙状态：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">service iptables status</span><br><span class="line">※：Centos7及更新版使用systemctl</span><br><span class="line">关闭&#x2F;启动防火墙立即生效（windows通过telnet ip 端口，测试是否生效）；</span><br><span class="line">	eg.telnet 192.168.1.80 22</span><br><span class="line">该方式为临时生效，重启失效；</span><br><span class="line">永久生效使用chkconfig</span><br></pre></td></tr></table></figure>

<p>（Tip ）windows的运行清除命令：cls</p>
<p>查看服务名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">方式1：使用setup-&gt;系统服务</span><br><span class="line">方式2：ls &#x2F;etc&#x2F;init.d&#x2F;</span><br></pre></td></tr></table></figure>

<p><strong>服务运行级别（runlevel）：（7种）常用级别3和5</strong></p>
<p>查看/修改级别：vi /etc/inittab</p>
<p>运行级别0:系统停机状态，系统默认不能为0，无法正常启动</p>
<p>运行级别1:单用户工作状态，root权限，用于系统维护，禁止远程登录</p>
<p>运行级别2:多用户状态（无nfs），不支持网络</p>
<p>运行级别3:完全的多用户状态（有nfs），登录后进入控制台命令模式</p>
<p>运行级别4:系统未使用，保留</p>
<p>运行级别5:X11控制台，登录后进入GUI</p>
<p>运行级别6:系统正常关闭并重启，默认不能为6，无法正常启动</p>
<p>开机流程：</p>
<p>开机-&gt;BIOS-&gt;/boot-&gt;-init进程&gt;-运行级别&gt;-运行级别对应服务</p>
<p>服务管理——chkconfig指令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">查看服务各个运行级别的状态：</span><br><span class="line">chkconfig --list | grep xxx</span><br><span class="line"></span><br><span class="line">查看指定服务的运行状态：</span><br><span class="line">chkconfig 服务名 --list</span><br><span class="line"></span><br><span class="line">设置指定服务在运行级别5为不自动启动</span><br><span class="line">chkconfig --level 5 服务名 on&#x2F;off</span><br><span class="line"></span><br><span class="line">当运行级别为5时，关闭防火墙</span><br><span class="line">chkconfig --level 5 iptables off</span><br></pre></td></tr></table></figure>

<p>动态监控进程：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">top [选项]</span><br><span class="line">	-d:间隔时间刷新（秒数）</span><br><span class="line">	-i:使用top不显示闲置&#x2F;僵尸进程</span><br><span class="line">	-p:指定进程ID</span><br></pre></td></tr></table></figure>

<p>监视指定用户：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">top</span><br><span class="line"></span><br><span class="line">返回信息：</span><br><span class="line">    XX:XX:XX当前时间</span><br><span class="line">    XX:XX(运行时间)</span><br><span class="line">    N user(当前N个用户登录)</span><br><span class="line">    load average(负载均衡)：0.35</span><br><span class="line">    tasks:N(任务数)</span><br><span class="line">    zombie表示僵尸任务</span><br><span class="line"></span><br><span class="line">输入k可终止进程；</span><br><span class="line">默认3秒刷新；</span><br><span class="line">输入q退出；</span><br><span class="line">输入P按cpu使用排序；</span><br><span class="line">输入M按内存使用率排序；</span><br><span class="line">输入N按照PID排序；</span><br><span class="line"></span><br><span class="line">top -d 10：1每隔10秒刷新一次</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>监控网络状态</p>
<p>查看系统网络情况netstat:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">netstat [选项]</span><br><span class="line">	-an:按一定顺序排序输出</span><br><span class="line">	-p:显示哪个进程在调用</span><br></pre></td></tr></table></figure>

<h3 id="16-RPM和YUM包"><a href="#16-RPM和YUM包" class="headerlink" title="16.RPM和YUM包"></a>16.RPM和YUM包</h3><p>RPM：RedHat Package Manager（RedHat软件包管理工具）</p>
<p>查询已安装的rpm列表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep xx</span><br></pre></td></tr></table></figure>

<p>查看安装rpm软件信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qi xxx</span><br></pre></td></tr></table></figure>

<p>查看rpm包的文件安装位置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ql xxx</span><br></pre></td></tr></table></figure>

<p>查看文件对应的安装包：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qf 目录</span><br></pre></td></tr></table></figure>

<p>卸载rpm包：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm -e xxx（firefox）</span><br><span class="line">&#x2F;&#x2F; 可能卸载出现错误信息</span><br><span class="line">&#x2F;&#x2F; 强制删除：rpm -e --nodeps xxx</span><br></pre></td></tr></table></figure>

<p>安装rpm包：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh rpm包路径</span><br><span class="line">	-i:install安装</span><br><span class="line">	-v:verbose提示</span><br><span class="line">	-h:hash进度条</span><br></pre></td></tr></table></figure>

<p>安装firefox：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh xxx</span><br></pre></td></tr></table></figure>

<p>yum：shell前端软件包管理器，基于rpm包管理，可从指定服务器下载rpm包并安装，可自动处理依赖性关系，并一次性下载所有依赖包。</p>
<p>查询yum服务器是否有需要安装的软件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list | grep xxx</span><br></pre></td></tr></table></figure>

<p>安装yum包：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install xxx</span><br></pre></td></tr></table></figure>

<h3 id="17-JDK的安装和配置"><a href="#17-JDK的安装和配置" class="headerlink" title="17.JDK的安装和配置"></a>17.JDK的安装和配置</h3><p>（1）apache-tomcat；jdk；eclipse；mysql的tar.gz包</p>
<p>（2）解压tar.gz</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk.tar.gz</span><br></pre></td></tr></table></figure>

<p>（3）配置环境</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;profile</span><br><span class="line"></span><br><span class="line">JAVA_HOME&#x3D;&#x2F;opt&#x2F;jdk1.7.0_79</span><br><span class="line">PATH&#x3D;&#x2F;opt&#x2F;jdk1.7.0_79&#x2F;bin:$PATH（:$PATH表示和其他PATH连接一起）</span><br><span class="line">export JAVA_HOME PATH（输出变量和生效）</span><br><span class="line"></span><br><span class="line">注销用户，环境变量才可以生效</span><br><span class="line">级别3&#x3D;&#x3D;&#x3D;&gt;logout</span><br><span class="line">或者 sourece &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>

<p>（5）安装tomcat</p>
<p>a.解压到/opt</p>
<p>b.启动tomcat ./startup.sh</p>
<p>c.开放端口 vim /etc/sysconfig/iptables</p>
<p>在windows下测试访问：<a target="_blank" rel="noopener" href="http://linuxip:8080/">http://linuxip:8080</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf ...</span><br><span class="line"></span><br><span class="line">cd apache-tomcat-7.0&#x2F;bin&#x2F;</span><br><span class="line">.&#x2F;startup.sh</span><br><span class="line"></span><br><span class="line">service iptables status</span><br><span class="line">vim &#x2F;etc&#x2F;sysconfig&#x2F;iptables</span><br><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT（开放8080）</span><br><span class="line">service iptables restart</span><br></pre></td></tr></table></figure>

<p>（6）安装eclipse</p>
<p>a.解压到/opt</p>
<p>b.启动eclipse，配置jre和server</p>
<p>c.编写Helloworld</p>
<p>d.编写jsp和测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf ...</span><br><span class="line">进入目录 . eclipse</span><br></pre></td></tr></table></figure>

<p>（7）安装mysql</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">1.是否有按照mysql server</span><br><span class="line">rpm -qa | grep mysql</span><br><span class="line">若有：rpm -e --nodeps mysql_libs</span><br><span class="line"></span><br><span class="line">2.按照编码代码需要的包</span><br><span class="line">yum -y install make gcc-c++ cmake bison-devel ncurses-devel</span><br><span class="line"></span><br><span class="line">3.解压</span><br><span class="line">tar -zvxf mysql...tar.gz</span><br><span class="line"></span><br><span class="line">4.编译安装[源码]</span><br><span class="line">cd mysql</span><br><span class="line">源码命令cmake -DCMAKE_INSTALL_PREFIX&#x3D;&#x2F;usr&#x2F;....</span><br><span class="line"></span><br><span class="line">5.编译并安装</span><br><span class="line">make &amp;&amp; make install </span><br><span class="line"></span><br><span class="line">6.设置权限</span><br><span class="line">    查看用户及用户组</span><br><span class="line">    cat &#x2F;etc&#x2F;passws</span><br><span class="line">    cat &#x2F;etc&#x2F;group</span><br><span class="line">    </span><br><span class="line">    添加用户及用户组</span><br><span class="line">    groupadd mysql</span><br><span class="line">    useradd -g mysql mysql</span><br><span class="line">    </span><br><span class="line">    修改&#x2F;usr&#x2F;local&#x2F;mysql权限</span><br><span class="line">    chown -R mysql:mysql&#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class="line"></span><br><span class="line">7.初始化配置</span><br><span class="line">cd &#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class="line">scripts&#x2F;mysql_install_db --basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql--detadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data --user&#x3D;mysql</span><br><span class="line"></span><br><span class="line">8.启动服务</span><br><span class="line">先在&#x2F;etc目录寻找，找不到则去$basedir&#x2F;my.cnf</span><br><span class="line">注：centos6.8在&#x2F;etc会自动生成my.cnf需要修改其文件名，例如&#x2F;etc&#x2F;my.cnf.bak</span><br><span class="line">修改文件名：mv &#x2F;etc&#x2F;my.cnf &#x2F;etc&#x2F;my.cnf.bak</span><br><span class="line"></span><br><span class="line">9.启动mysql</span><br><span class="line">添加服务，拷贝服务脚本在init.d目录，设置开机启动</span><br><span class="line">cp support-files&#x2F;mysql.server &#x2F;etc&#x2F;init.d&#x2F;mysql</span><br><span class="line">chkconfig mysql on</span><br><span class="line">service mysql start --启动mysql</span><br><span class="line"></span><br><span class="line">修改root密码</span><br><span class="line">cd &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin</span><br><span class="line">.&#x2F;mysql -uroot（进入mysql）</span><br><span class="line">mysql&gt;SET PASSWORD &#x3D; PASSWORD(&quot;root);</span><br><span class="line"></span><br><span class="line">mysql&gt;show databases;</span><br><span class="line">mysql&gt;create database maths;</span><br><span class="line">mysql&gt;use maths;</span><br><span class="line">mysql&gt;create table user(id int,name varchar(32));</span><br><span class="line">mysql&gt;insert into users values(100,&#39;tom&#39;);</span><br><span class="line">mysql&gt;quit</span><br><span class="line"></span><br><span class="line">在其他目录进入mysql：</span><br><span class="line">在vim &#x2F;etc&#x2F;profile加入：</span><br><span class="line">PATH&#x3D;&#x2F;opt&#x2F;jdk1.7.0_79&#x2F;bin:&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin:$PATH</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="18-shell编程"><a href="#18-shell编程" class="headerlink" title="18.shell编程"></a>18.shell编程</h3><p>shell是一个命令行解释器，为用户提供了一个向linux内核发送请求以便运行程序的界面系统级程序。</p>
<p>硬件-&gt;内核-&gt;shell命令行解释器-&gt;外层应用程序</p>
<p>shell快速入门：</p>
<p>a.脚本以#!bin/bash开头</p>
<p>b.脚本需要可执行权限</p>
<p>输出hello,world!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi myShell.sh</span><br><span class="line">    #!bin&#x2F;bash</span><br><span class="line">    echo &quot;hello,world&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 744 myShell.sh</span><br></pre></td></tr></table></figure>

<h4 id="（1）变量"><a href="#（1）变量" class="headerlink" title="（1）变量"></a>（1）变量</h4><p>变量分为：系统变量和用户自定义变量</p>
<p>系统变量：$HOME、$PWD、$SHELL、$USER</p>
<p>显示当前shell所有变量：set</p>
<p>注意定义变量值时不能添加空格</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">A&#x3D;100</span><br><span class="line">echo &quot;A&#x3D;$A&quot;#注意引用的时候需要带上$</span><br><span class="line">unset A&#x2F;&#x2F;删除变量定义</span><br><span class="line">echo &quot;A&#x3D;$A&quot;</span><br><span class="line"></span><br><span class="line">readonly A&#x3D;99#静态变量</span><br><span class="line"># readonly静态变量不可以unset</span><br><span class="line"></span><br><span class="line">执行命令-方式1：</span><br><span class="line">A&#x3D;&#96;ls -la&#96; 反引号，运行命令并返回变量A</span><br><span class="line">echo $A</span><br><span class="line"></span><br><span class="line">执行命令-方式2：（建议）</span><br><span class="line">B&#x3D;$(date)</span><br><span class="line">echo $B</span><br><span class="line"></span><br><span class="line">设置环境变量</span><br><span class="line">(1)export 变量名&#x3D;变量值（将shell变量输出为环境变量）</span><br><span class="line">(2)source 配置文件（修改后的配置文件立即生效）</span><br><span class="line">(3)echo $变量名（查询环境变量值）</span><br><span class="line"></span><br><span class="line">快速入门：</span><br><span class="line">1）在&#x2F;etc&#x2F;profile文件中定义TOMCAT_HOME环境变量</span><br><span class="line">	TOMCAT_HOME&#x3D;&#x2F;opt&#x2F;tomcat</span><br><span class="line">    export TOMCAT_HOME</span><br><span class="line">    applied&#x3D;$(source &#x2F;etc&#x2F;profile)</span><br><span class="line">    echo $applied</span><br><span class="line">2）查看环境变量TOMCAT_HOME值</span><br><span class="line">    echo $TOMCAT_HOME</span><br><span class="line"></span><br><span class="line">注意：在输出JAVA_HOME环境变量前，需要让其生效source &#x2F;etc&#x2F;profile</span><br><span class="line"></span><br><span class="line">多行注释：</span><br><span class="line">:&lt;&lt;!</span><br><span class="line">xxxxxxxx</span><br><span class="line">!</span><br></pre></td></tr></table></figure>

<p><strong>位置参数变量：</strong></p>
<p>当我们执行shell时，希望获取命令的参数信息，例如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;myshell.sh 100 200</span><br></pre></td></tr></table></figure>

<p>基本语法:</p>
<p>$n（n为数字，$0表示命令本身，$1-9表示第1-9个参数，10以上参数要用括号${10}）</p>
<p>$* 表示命令行中所有参数，$*把所有参数看作一个整体</p>
<p>$@ 表示命令行中所有参数，$@把每个参数区分对待</p>
<p>$# 表示命令行的所有参数个数</p>
<p>应用实例：编写一个shell脚本postionPara.sh，获取命令行各个参数信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pos.sh</span><br><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">#获取各个参数</span><br><span class="line">echo &quot;$0,$1,$2&quot;</span><br><span class="line">echo &quot;$*&quot;</span><br><span class="line">echo &quot;$@&quot;</span><br><span class="line">echo &quot;$#&quot;</span><br><span class="line"></span><br><span class="line">#输入</span><br><span class="line">.&#x2F;pos.sh a1 b2 c3</span><br><span class="line">#输出</span><br><span class="line">echo &quot;$0,$1,$2&quot;&#x3D;&#x3D;&#x3D;&#x3D;&gt;.&#x2F;pos.sh ,a1, b2</span><br><span class="line">echo &quot;$*&quot;&#x3D;&#x3D;&#x3D;&gt;a1 b2 c3</span><br><span class="line">echo &quot;$@&quot;&#x3D;&#x3D;&#x3D;&gt;a1 b2 c3</span><br><span class="line">echo &quot;$#&quot;&#x3D;&#x3D;&#x3D;&gt;3</span><br></pre></td></tr></table></figure>

<p><strong>预定义变量</strong></p>
<p>事先定义的变量</p>
<p>基本语法：</p>
<p>$$ 当前进程号PID</p>
<p>$! 后台运行的最后一个进程号PID</p>
<p>$? 最后一次执行的命令返回状态，如果这个变量的值为0，则证明上一命令正确，该变量值非0，则证明上一命令执行不正确。</p>
<p>应用实例：在一个shell脚本中使用预定义变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">echo &quot;当前进程号&#x3D;$$&quot;</span><br><span class="line">#后台方式运行myShell.sh（&amp;表示后台方式运行）</span><br><span class="line">.&#x2F;myShell.sh &amp;</span><br><span class="line">echo &quot;最后的进程PID&#x3D;$!&quot;</span><br><span class="line">echo &quot;执行结果&#x3D;$?&quot;</span><br></pre></td></tr></table></figure>

<h4 id="（2）运算符"><a href="#（2）运算符" class="headerlink" title="（2）运算符"></a>（2）运算符</h4><p>基本语法</p>
<p>a.“$((运算式))或$[运算式]”</p>
<p><strong>※ (())有两层嵌套</strong></p>
<p>b.expr m + n</p>
<p><strong>※ 注意有空格</strong></p>
<p>c.expr \ * , / , % 乘，除，取余</p>
<p>应用实例1：计算（2+3）×4</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line"># 方式1</span><br><span class="line">echo &quot;$(((2+3)*4))&quot;</span><br><span class="line"># 注意：将$()里面放在一个括号内，多一个嵌套</span><br><span class="line"></span><br><span class="line"># 方式2：推荐，简洁</span><br><span class="line">echo &quot;$[(2+3)*4]&quot;</span><br><span class="line"></span><br><span class="line"># 方式3：</span><br><span class="line">TEMP&#x3D;&#96;expr 2 + 3&#96;</span><br><span class="line">RESULT&#x3D;&#96;expr $TEMP \* 4&#96; </span><br><span class="line">echo &quot;RESULT&quot;</span><br></pre></td></tr></table></figure>

<p>应用实例2：求出命令行2个参数的和</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">echo &quot;$(($1+$2))&quot;</span><br><span class="line"># 注意：将$()里面放在一个括号内，多一个嵌套</span><br><span class="line"></span><br><span class="line">echo &quot;$[$1+$2]&quot;</span><br></pre></td></tr></table></figure>

<h4 id="（3）条件判断"><a href="#（3）条件判断" class="headerlink" title="（3）条件判断"></a>（3）条件判断</h4><p>基本语法：</p>
<p>[ condition ] </p>
<p><strong>注意：condition前后有空格</strong></p>
<p>非空则返回true；可适用$?验证（0为true，&gt;1为false）</p>
<p>判断语句：</p>
<p>（a）整数比较</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x3D; 字符串比较</span><br><span class="line"></span><br><span class="line">-lt 小于	-le小于等于</span><br><span class="line"></span><br><span class="line">-eq 等于	-ne 不等于</span><br><span class="line"></span><br><span class="line">-gt 大于	-ge 大于等于</span><br><span class="line"></span><br><span class="line">eg. [ 22 -eq 23 ]</span><br></pre></td></tr></table></figure>

<p>（b）按文件权限判断</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-r 有读权限</span><br><span class="line"></span><br><span class="line">-w 有写权限</span><br><span class="line"></span><br><span class="line">-x 可执行权限</span><br><span class="line"></span><br><span class="line">eg. [ -w hello.sh ]</span><br></pre></td></tr></table></figure>

<p>（c）文件类型判断</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-f 文件存在且常规文件</span><br><span class="line"></span><br><span class="line">-e 文件存在</span><br><span class="line"></span><br><span class="line">-d 文件存在且为目录</span><br></pre></td></tr></table></figure>

<p>（d）应用实例</p>
<p>案例1：”ok”是否等于”ok”</p>
<p><strong>注：很多个地方有空</strong></p>
<p>if空格[空格“ok”空格=空格“ok”空格]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">if [ &quot;ok&quot; &#x3D; &quot;ok&quot; ]</span><br><span class="line">then</span><br><span class="line">	echo &quot;相等&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 744 judge.sh</span><br></pre></td></tr></table></figure>

<p>案例2：23是否大于22</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if [ 23 -gt 22 ]</span><br><span class="line">	then</span><br><span class="line">		echo &quot;大于&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>案例3：/root/install.log文件是否存在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if [ -e &#x2F;root&#x2F;shell&#x2F;aaa.txt ]</span><br><span class="line">	then</span><br><span class="line">		echo &quot;存在&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>if和else判断</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">aa&#x3D;10</span><br><span class="line">if [ $aa -ge 60 ]</span><br><span class="line">	then</span><br><span class="line">		echo &quot;及格&quot;</span><br><span class="line">elif [ $aa -lt 60 ]</span><br><span class="line">	then</span><br><span class="line">		echo &quot;不及格&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>case语句：</p>
<p>案例1：当命令行参数为1则输出周一；2则输出周二；其它则输出”other”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">echo &quot;Hello World !&quot;</span><br><span class="line">aa&#x3D;1</span><br><span class="line">case $aa in</span><br><span class="line">&quot;1&quot;)</span><br><span class="line">echo &quot;周一&quot;</span><br><span class="line">;;</span><br><span class="line">&quot;2&quot;)</span><br><span class="line">echo &quot;周二&quot;</span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line">echo &quot;other&quot;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<h4 id="（4）for和while循环"><a href="#（4）for和while循环" class="headerlink" title="（4）for和while循环"></a>（4）for和while循环</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">#方式1</span><br><span class="line">for i in &quot;$*&quot;</span><br><span class="line">do</span><br><span class="line">	echo &quot;the num is $i&quot;</span><br><span class="line">done</span><br><span class="line"># 输出：the num is 10 20 30</span><br><span class="line"></span><br><span class="line">#方式2</span><br><span class="line">for i in &quot;$@&quot;</span><br><span class="line">do</span><br><span class="line">	echo &quot;the num is $i&quot;</span><br><span class="line">done</span><br><span class="line"># 输出：</span><br><span class="line">the num is 10</span><br><span class="line">the num is 20</span><br><span class="line">the num is 30</span><br></pre></td></tr></table></figure>

<p>案例：输出1+2+…+100</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">SUM&#x3D;0</span><br><span class="line">for((i&#x3D;1;i&lt;&#x3D;100;i++))</span><br><span class="line">do</span><br><span class="line">	SUM&#x3D;$(($SUM+$i))</span><br><span class="line">	#或者SUM&#x3D;$[$SUM+$i]</span><br><span class="line">done</span><br><span class="line">echo &quot;sum&#x3D;$SUM&quot;</span><br></pre></td></tr></table></figure>

<p>案例：从命令行输入一个数n，统计1+…+n的值？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">SUM&#x3D;0</span><br><span class="line">i&#x3D;0</span><br><span class="line">n&#x3D;100</span><br><span class="line">while [ $i -le $n ]</span><br><span class="line">do</span><br><span class="line">	SUM&#x3D;$[$SUM+$i]</span><br><span class="line">	i&#x3D;$[$i+1]</span><br><span class="line">done</span><br><span class="line">echo &quot;sum&#x3D;$SUM&quot;</span><br></pre></td></tr></table></figure>

<h4 id="（5）读取控制台输入"><a href="#（5）读取控制台输入" class="headerlink" title="（5）读取控制台输入"></a>（5）读取控制台输入</h4><p>基本语法</p>
<p>read [选项] (参数)</p>
<p>-p 指定读取值时的提示符</p>
<p>-t 指定读取值等待时间（秒），如果没有指定时间输入，就不再等待</p>
<p>应用实例1：读取控制台输入一个num值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">read -p &quot;输入一个数&#x3D;&quot; NUM1</span><br><span class="line">echo &quot;你输入的是$NUM&quot;</span><br></pre></td></tr></table></figure>

<p>应用实例2：读取控制台输入一个num值，在10秒内输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">read -t 10 -p &quot;输入一个数&#x3D;&quot; NUM1</span><br><span class="line">echo &quot;你输入的是$NUM&quot;</span><br></pre></td></tr></table></figure>

<h4 id="（6）函数"><a href="#（6）函数" class="headerlink" title="（6）函数"></a>（6）函数</h4><p>函数：系统函数和自定义函数</p>
<p>系统函数：</p>
<p>basename基本语法</p>
<p>功能：返回完整路径最后/的部分，常用于获取文件名</p>
<p>basename [pathname] [suffix]</p>
<p>basename [string] [suffix] 功能描述：basename命令会删除所有的前缀包括最后（’/‘）字符，将字符串显示出来</p>
<p>选项：suffix为后缀，若suffix指定，basename将pathname或string的suffix去掉</p>
<p>应用实例：返回/home/aaa/test.txt的”test.txt”部分</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">命令：basename &#x2F;home&#x2F;aaa&#x2F;test.txt</span><br><span class="line">输出：test.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">命令：basename &#x2F;home&#x2F;aaa&#x2F;test.txt .txt</span><br><span class="line">输出：test</span><br></pre></td></tr></table></figure>

<p>dirname基本语法</p>
<p>功能：返回完整路径最后的/前面部分</p>
<p>应用实例：返回/home/aaa/test.txt的/home/aaa</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">命令：dirname &#x2F;home&#x2F;aaa&#x2F;test.txt</span><br><span class="line">输出：&#x2F;home&#x2F;aaa</span><br></pre></td></tr></table></figure>

<p>自定义函数：</p>
<p>基本语法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ function ] function_name[()]</span><br><span class="line">&#123;</span><br><span class="line">	Action;</span><br><span class="line">    [return int;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>应用实例：计算输入两参数之和</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">function getSum()&#123;</span><br><span class="line">	SUM&#x3D;$[$n1+$n2]</span><br><span class="line">	echo &quot;$n1+$n2&#x3D;$SUM&quot;</span><br><span class="line">&#125;</span><br><span class="line">read -p &quot;输入第1个数&quot; n1</span><br><span class="line">read -p &quot;输入第2个数&quot; n2</span><br><span class="line"></span><br><span class="line">#调用</span><br><span class="line">getSum $n1 $n2</span><br></pre></td></tr></table></figure>

<h4 id="（7）综合案例"><a href="#（7）综合案例" class="headerlink" title="（7）综合案例"></a>（7）综合案例</h4><p>a.每天凌晨2:10备份数据库atguiguDB到/data/backup/db</p>
<p>b.备份开始和结束要求提示信息</p>
<p>c.备份后文件以备份时间为文件名，并打包成.tar.gz形式，例如：2018-03-12_230201.tar.gz</p>
<p>d.备份的同时，检查是否存在前10天的数据库文件，若有则删除</p>
<p>/usr/sbin/mysql_db_backup.sh文件内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">#备份路径及时间作为文件名</span><br><span class="line">BACKUP&#x3D;&#x2F;data&#x2F;backup&#x2F;db</span><br><span class="line">DATETIME&#x3D;$(date +%Y_%m_%d_%H%M%S)</span><br><span class="line">echo $DATETIME</span><br><span class="line"></span><br><span class="line">#数据库主机、用户名、密码、数据库名</span><br><span class="line">HOST&#x3D;localhost</span><br><span class="line">DB_USER&#x3D;root</span><br><span class="line">DB_PWD&#x3D;123</span><br><span class="line">DATABASE&#x3D;atguiguDB</span><br><span class="line"></span><br><span class="line">#备份路径，若不存在则创建</span><br><span class="line">[ ! -d &quot;$BACKUP&#x2F;$DATETIME&quot; ] &amp;&amp; mkdir -p &quot;$BACKUP&#x2F;$DATETIME&quot;</span><br><span class="line"></span><br><span class="line">#备份mysql数据库并压缩到指定文件</span><br><span class="line">mysqldump -u$DB_USER -p$DB_PWD --host&#x3D;$HOST $DATABASE | gzip &gt; $BACKUP&#x2F;$DATETIME&#x2F;$DATETIME.sql.gz</span><br><span class="line"></span><br><span class="line">#打包备份文件</span><br><span class="line">cd $BACKUP</span><br><span class="line">tar -zcvf $DATETIME.tar.gz $DATETIME</span><br><span class="line"></span><br><span class="line">#删除临时文件</span><br><span class="line">rm -rf $BACKUP&#x2F;$DATETIME</span><br><span class="line"></span><br><span class="line">#删除10天前的备份文件</span><br><span class="line">find $BACKUP -mtime +10 -name &quot;*.tar.gz&quot; -exec rm -rf &#123;&#125; \;</span><br><span class="line"></span><br><span class="line">#提示</span><br><span class="line">echo &quot;备份完成&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">将上述脚本设置定时执行</span><br><span class="line">crontab -e</span><br><span class="line">10 2 * * * &#x2F;usr&#x2F;sbin&#x2F;mysql_db_backup.sh</span><br></pre></td></tr></table></figure>

<h4 id="※-补充内容"><a href="#※-补充内容" class="headerlink" title="※ 补充内容"></a>※ 补充内容</h4><p>（1）可采用sh或bash + 脚本相对路径或者绝对路径（不需要赋予脚本x权限）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sh myShell.sh</span><br><span class="line">bash myShell.sh</span><br><span class="line">.&#x2F;myShell.sh（赋予x权限后可执行）</span><br></pre></td></tr></table></figure>

<p>（2）在a.txt中追加“I love you”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">cd &#x2F;home</span><br><span class="line">touch a.txt</span><br><span class="line">echo &quot;I love you&quot; &gt;&gt; a.txt</span><br></pre></td></tr></table></figure>

<p>（3）bash中变量的默认类型均为字符串，不可以直接数字运算</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A&#x3D;1+1</span><br><span class="line">echo $A</span><br><span class="line">1+1</span><br></pre></td></tr></table></figure>

<p>（4）将变量提升为全局环境变量，可供其他shell程序使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在外部B&#x3D;haha</span><br><span class="line">export B</span><br><span class="line">可在其他shell中直接调用$B</span><br></pre></td></tr></table></figure>

<h3 id="19-Shell工具"><a href="#19-Shell工具" class="headerlink" title="19.Shell工具"></a>19.Shell工具</h3><h4 id="（1）cut"><a href="#（1）cut" class="headerlink" title="（1）cut"></a>（1）cut</h4><p>在文件中负责剪切数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cut [选项参数] filename</span><br><span class="line">	-f 列号，提取第几列</span><br><span class="line">	-d 分隔符，按照指定分割符分割列</span><br></pre></td></tr></table></figure>

<p>示例文件 cut.txt</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dong shen</span><br><span class="line">guan zhen</span><br><span class="line">lai lai</span><br></pre></td></tr></table></figure>

<p>eg. 分割cut.txt第一列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cut -d &quot; &quot; -f 1 cut</span><br><span class="line"></span><br><span class="line"># 输出</span><br><span class="line">dong</span><br><span class="line">guan</span><br><span class="line">lai</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>eg.分割cut.txt第二、三列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cut -d &quot; &quot; -f 2,3 cut</span><br><span class="line"></span><br><span class="line"># 输出</span><br><span class="line">shen</span><br><span class="line">zhen</span><br><span class="line">lai</span><br></pre></td></tr></table></figure>

<p>eg.找到以guan开头行的第二列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat cut.txt | grep guan | cut -d &quot; &quot; -f 2</span><br><span class="line"></span><br><span class="line"># 输出</span><br><span class="line">zhen</span><br></pre></td></tr></table></figure>

<p>eg.选择系统PATH变量值，第二个”:”开始的所有路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $PATH | cut -d &quot;:&quot; -f 2-</span><br></pre></td></tr></table></figure>

<p>eg.切割ifconfig后打印的IP地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0 | grep &quot;inet addr&quot; | cut -d : -f 2 | cut -d &quot; &quot; -f 1</span><br></pre></td></tr></table></figure>

<h4 id="（2）sed"><a href="#（2）sed" class="headerlink" title="（2）sed"></a>（2）sed</h4><p>sed是一种流编辑器，每次处理一行内容，把当前处理的行存储在临时缓冲区，称为“模式空间”，使用sed命令处理缓冲区中的内容，处理完成后，将缓冲区的内容送往屏幕，不断重复直至文件末尾，文件内容不会改变，除非使用重定向存储输出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed [选项参数] &#39;command&#39; filename</span><br><span class="line">	-e 直接在指令列模式上进行sed动作编辑</span><br></pre></td></tr></table></figure>

<p>命令功能描述：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a 新增，a后可接字符串，在下一行出现</span><br><span class="line">d 删除</span><br><span class="line">s 查找并替换</span><br></pre></td></tr></table></figure>

<p>案例应用：</p>
<p>sed.txt</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dong shen</span><br><span class="line">guan zhen</span><br><span class="line">wo wo</span><br><span class="line">lai lai</span><br><span class="line"></span><br><span class="line">le le</span><br></pre></td></tr></table></figure>

<p>将“boy girl”插入sed第二行并打印输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sed &quot;2a boy girl&quot; sed.txt</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">dong shen</span><br><span class="line">guan zhen</span><br><span class="line">boy girl</span><br><span class="line">wo wo</span><br><span class="line">lai lai</span><br><span class="line"></span><br><span class="line">le le</span><br></pre></td></tr></table></figure>

<p>删除sed.txt包含wo的行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sed &quot;&#x2F;wo&#x2F;d&quot; sed.txt</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">dong shen</span><br><span class="line">guan zhen</span><br><span class="line">lai lai</span><br><span class="line"></span><br><span class="line">le le</span><br></pre></td></tr></table></figure>

<p>将sed.txt文件的wo替换成ni</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sed &#39;s&#x2F;wo&#x2F;ni&#x2F;g&#39; sed.txt	#其中&#39;g&#39;表示global，全部替换</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">dong shen</span><br><span class="line">guan zhen</span><br><span class="line">ni ni</span><br><span class="line">lai lai</span><br><span class="line"></span><br><span class="line">le le</span><br></pre></td></tr></table></figure>

<p>将sed.txt第二行删除并替换wo为ni</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &quot;2d&quot; -e &quot;s&#x2F;wo&#x2F;ni&#x2F;g&quot; sed.txt</span><br></pre></td></tr></table></figure>

<h4 id="（3）awk"><a href="#（3）awk" class="headerlink" title="（3）awk"></a>（3）awk</h4><p>文本分析工具，将文件逐行读入，以空格默认分隔符对每行切片，再分析处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">awk [选项参数] &#39;pattern1&#123;action1&#125; pattern2&#123;action2&#125; ...&#39; filename</span><br><span class="line">pattern 表示awk在数据中查找的内容，匹配模式</span><br><span class="line">action 在找到匹配内容时所执行的一系列命令</span><br><span class="line">	-F 指定输入文件分隔符</span><br><span class="line">	-v 赋值一个用户定义变量</span><br></pre></td></tr></table></figure>

<p>案例应用：</p>
<p>passwd文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp &#x2F;etc&#x2F;passwd .&#x2F;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">root:x:0:0:root:&#x2F;root:&#x2F;bin&#x2F;bash</span><br><span class="line">bin:x:1:1:bin:&#x2F;bin:&#x2F;sbin&#x2F;nologin</span><br><span class="line">daemon:x:2:2:daemon:&#x2F;sbin:&#x2F;sbin&#x2F;nologin</span><br><span class="line">adm:x:3:4:adm:&#x2F;var&#x2F;adm:&#x2F;sbin&#x2F;nologin</span><br><span class="line">lp:x:4:7:lp:&#x2F;var&#x2F;spool&#x2F;lpd:&#x2F;sbin&#x2F;nologin</span><br><span class="line">sync:x:5:0:sync:&#x2F;sbin:&#x2F;bin&#x2F;sync</span><br><span class="line">shutdown:x:6:0:shutdown:&#x2F;sbin:&#x2F;sbin&#x2F;shutdown</span><br><span class="line">halt:x:7:0:halt:&#x2F;sbin:&#x2F;sbin&#x2F;halt</span><br><span class="line">mail:x:8:12:mail:&#x2F;var&#x2F;spool&#x2F;mail:&#x2F;sbin&#x2F;nologin</span><br><span class="line">uucp:x:10:14:uucp:&#x2F;var&#x2F;spool&#x2F;uucp:&#x2F;sbin&#x2F;nologin</span><br><span class="line">operator:x:11:0:operator:&#x2F;root:&#x2F;sbin&#x2F;nologin</span><br><span class="line">games:x:12:100:games:&#x2F;usr&#x2F;games:&#x2F;sbin&#x2F;nologin</span><br><span class="line">gopher:x:13:30:gopher:&#x2F;var&#x2F;gopher:&#x2F;sbin&#x2F;nologin</span><br><span class="line">ftp:x:14:50:FTP User:&#x2F;var&#x2F;ftp:&#x2F;sbin&#x2F;nologin</span><br><span class="line">nobody:x:99:99:Nobody:&#x2F;:&#x2F;sbin&#x2F;nologin</span><br><span class="line">dbus:x:81:81:System message bus:&#x2F;:&#x2F;sbin&#x2F;nologin</span><br><span class="line">usbmuxd:x:113:113:usbmuxd user:&#x2F;:&#x2F;sbin&#x2F;nologin</span><br><span class="line">vcsa:x:69:69:virtual console memory owner:&#x2F;dev:&#x2F;sbin&#x2F;nologin</span><br><span class="line">rtkit:x:499:497:RealtimeKit:&#x2F;proc:&#x2F;sbin&#x2F;nologin</span><br><span class="line">avahi-autoipd:x:170:170:Avahi IPv4LL Stack:&#x2F;var&#x2F;lib&#x2F;avahi-autoipd:&#x2F;sbin&#x2F;nologin</span><br><span class="line">abrt:x:173:173::&#x2F;etc&#x2F;abrt:&#x2F;sbin&#x2F;nologin</span><br><span class="line">haldaemon:x:68:68:HAL daemon:&#x2F;:&#x2F;sbin&#x2F;nologin</span><br><span class="line">gdm:x:42:42::&#x2F;var&#x2F;lib&#x2F;gdm:&#x2F;sbin&#x2F;nologin</span><br><span class="line">ntp:x:38:38::&#x2F;etc&#x2F;ntp:&#x2F;sbin&#x2F;nologin</span><br><span class="line">apache:x:48:48:Apache:&#x2F;var&#x2F;www:&#x2F;sbin&#x2F;nologin</span><br><span class="line">saslauth:x:498:76:&quot;Saslauthd user&quot;:&#x2F;var&#x2F;empty&#x2F;saslauth:&#x2F;sbin&#x2F;nologin</span><br><span class="line">postfix:x:89:89::&#x2F;var&#x2F;spool&#x2F;postfix:&#x2F;sbin&#x2F;nologin</span><br><span class="line">pulse:x:497:496:PulseAudio System Daemon:&#x2F;var&#x2F;run&#x2F;pulse:&#x2F;sbin&#x2F;nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:&#x2F;var&#x2F;empty&#x2F;sshd:&#x2F;sbin&#x2F;nologin</span><br><span class="line">tcpdump:x:72:72::&#x2F;:&#x2F;sbin&#x2F;nologin</span><br><span class="line">jimmy:x:500:500:jimmyguo:&#x2F;home&#x2F;jimmy:&#x2F;bin&#x2F;bash</span><br></pre></td></tr></table></figure>

<p>搜索passwd 文件以root关键字开头的所有行，输出该行第7列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#39;&#x2F;^root&#x2F; &#123;print $7&#125;&#39; passwd</span><br></pre></td></tr></table></figure>

<p>搜索passwd 文件以root关键字开头的所有行，输出该行第1，7列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#39;&#x2F;^root&#x2F; &#123;print $1&quot;,&quot;$7&#125;&#39; passwd</span><br></pre></td></tr></table></figure>

<p>在passwd 文件所有行前添加user,shell ，仅打印第1列和第7列，且在最后一行添加”heihei,xixi”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#39;BEGIN&#123;print&quot;user,shell&quot;&#125; &#123;print $1&quot;,&quot;$7&#125; END &#123;print &quot;heihei,xixi&quot;&#125;&#39; passwd </span><br></pre></td></tr></table></figure>

<p>将passwd文件的用户id加1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: -v i&#x3D;1 &#39;&#123;print $3+$i&#125;&#39; passwd </span><br></pre></td></tr></table></figure>

<p>awk内置变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FILENAME 文件名</span><br><span class="line">NR 已读记录数</span><br><span class="line">NF 浏览记录的域的个数（切割后，列数）</span><br></pre></td></tr></table></figure>

<p>案例应用：</p>
<p>（1）统计passwd 文件名，行号，每行列数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#39;&#123;print FILENAME ,NR ,NF&#125;&#39; passwd </span><br></pre></td></tr></table></figure>

<p>（2）切割IP</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0 | grep &quot;inet addr&quot; | awk -F:&#39;&#123;print $2&#125;&#39; | awk -F &#39; &#39; &#39;&#123;print $1&#125;&#39;</span><br></pre></td></tr></table></figure>

<h4 id="（4）sort"><a href="#（4）sort" class="headerlink" title="（4）sort"></a>（4）sort</h4><p>对文件排序并将结果输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sort [选项参数]</span><br><span class="line">	-n 依照数值大小排序</span><br><span class="line">	-r 相反顺序排序</span><br><span class="line">	-t 设置排序时所用分隔字符</span><br><span class="line">	-k 指定排序列</span><br></pre></td></tr></table></figure>

<p>sort.txt</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bb:40:5.4</span><br><span class="line">bd:20:4.2</span><br><span class="line">xz:50:2.3</span><br><span class="line">cls:10:3.5</span><br><span class="line">ss:30:1.6</span><br></pre></td></tr></table></figure>

<p>按照“：”分割后的第3列倒序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -t : -nrk 3 sort.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bb:40:5.4</span><br><span class="line">bd:20:4.2</span><br><span class="line">cls:10:3.5</span><br><span class="line">xz:50:2.3</span><br><span class="line">ss:30:1.6</span><br></pre></td></tr></table></figure>

<h4 id="（5）综合案例"><a href="#（5）综合案例" class="headerlink" title="（5）综合案例"></a>（5）综合案例</h4><p>a.查询空行的行号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#39;&#x2F;^$&#123;print NR&#125;&#39; sed.txt</span><br></pre></td></tr></table></figure>

<p>b.计算第2列和并输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">张三 40</span><br><span class="line">李四 50</span><br><span class="line">王五 60</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat chengji.txt | awk -F &quot; &quot; &#39;&#123;sum+&#x3D;$2&#125; END&#123;print sum&#125;&#39;</span><br></pre></td></tr></table></figure>

<p>c.Shell检查一个文件是否存在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">if [ -f file.txt]</span><br><span class="line">	then</span><br><span class="line">		echo &quot;文件存在&quot;</span><br><span class="line">else</span><br><span class="line">	echo &quot;文件不存在&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>d.对数字排序并求和</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cat test.txt</span><br><span class="line">9</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">2</span><br><span class="line">5</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -n test.txt | awk &#39;&#123;a+&#x3D;$0;print$0&#125;END&#123;print &quot;SUM&#x3D;&quot;a&#125;&#39;</span><br></pre></td></tr></table></figure>

<p>e.shell脚本查找/home所有文本包含”shen”的文件名称</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -r &quot;shen&quot; &#x2F;home | cut -d &quot;:&quot; -f l</span><br></pre></td></tr></table></figure>





<h3 id="20-Ubuntu"><a href="#20-Ubuntu" class="headerlink" title="20.Ubuntu"></a>20.Ubuntu</h3><p>系统通常自带Python</p>
<h4 id="（1）设置root密码"><a href="#（1）设置root密码" class="headerlink" title="（1）设置root密码"></a>（1）设置root密码</h4><p>a.输入sudo passwd，输入一般用户密码后设置root密码</p>
<p>b.设定root密码成功后，输入su命令，并输入刚才设定的root密码，可切换成root，提示符$表示一般用户，提示符#表示root用户<br>c.输入exit后返回一般用户</p>
<h4 id="（2）安装vim等工具"><a href="#（2）安装vim等工具" class="headerlink" title="（2）安装vim等工具"></a>（2）安装vim等工具</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install vim</span><br></pre></td></tr></table></figure>

<p>其中apt是Advanced Packaging Tool的简称，是一款安装包管理工具，可用apt用于软件安装、删除、清理等。</p>
<p>相关命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update 更新源</span><br><span class="line">sudo apt-get install package 安装包</span><br><span class="line">sudo apt-get remove package 删除包</span><br><span class="line"></span><br><span class="line">sudo apt-cache search package 搜索软件包</span><br><span class="line">sudo apt-cache show package 获取软件包相关信息</span><br><span class="line">sudo apt-get install package --reinstall重新安装</span><br><span class="line"></span><br><span class="line">sudo apt-get -f install 修复安装</span><br><span class="line">sudo apt-get remove package --purge 删除包（包括配置文件）</span><br><span class="line">sudo apt-get build-dep package 安装相关的编译环境</span><br><span class="line"></span><br><span class="line">sudo apt-get upgrade 更新已安装的包</span><br><span class="line">sudo apt-get dist-upgrade 升级系统</span><br><span class="line">sudo apt-cache depends package 了解依赖包</span><br><span class="line">sudo apt-cache rdepends package 查看依赖包</span><br><span class="line">sudo apt-get source package 下载包源代码</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>更新Ubuntu软件下载地址（使用清华软件仓库镜像）</p>
<p><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/">https://mirrors.tuna.tsinghua.edu.cn/</a></p>
<p>（1）备份Ubuntu默认源地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp &#x2F;etc&#x2F;apt&#x2F;sources.list &#x2F;etc&#x2F;apt&#x2F;sources.list.backup</span><br></pre></td></tr></table></figure>

<p>（2）将sources.list清空</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &#39;&#39; &gt; sources.list</span><br></pre></td></tr></table></figure>

<p>（3）将Ubuntu清华镜像使用帮助复制到sources.list</p>
<p>（4）更新源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>

<h4 id="（3）SSH安装和启动"><a href="#（3）SSH安装和启动" class="headerlink" title="（3）SSH安装和启动"></a>（3）SSH安装和启动</h4><p>SSH为Secure Shell缩写，较为可靠，为远程登录会话以及资料拷贝。</p>
<p>Ubuntu没有自带SSH</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openssh-server</span><br><span class="line">service sshd restart&#x2F;&#x2F;会监听端口22</span><br></pre></td></tr></table></figure>



<h3 id="常见命令"><a href="#常见命令" class="headerlink" title="=常见命令="></a>=常见命令=</h3><h3 id="基础命令"><a href="#基础命令" class="headerlink" title="基础命令"></a>基础命令</h3><ol>
<li>超级用户：root</li>
<li>打开终端 ctrl+alt+t</li>
<li>查看硬件信息：lshw</li>
<li>查看cpu信息：lscpu</li>
<li>查看usb信息：lsusb</li>
<li>查看系统名（系统全部信息）：uname [-a]</li>
<li>查看系统的架构 x86 表示32位  x86_64表示64位：arch</li>
<li>添加用户:adduser 用户名</li>
<li>设置密码:passwd 用户名</li>
<li>修改当前用户密码：passwd</li>
<li>切换用户：su（switch user）</li>
<li>进入用户目录（home）：cd ~</li>
<li>删除用户：userdel 用户名</li>
<li>日期：date</li>
<li>更改时间：date -s      ‘MMDDhhmmYYYY.ss’</li>
<li>查看文件路径：whereis 文件名</li>
<li>复制date：cp /bin/date      ./work/mydate</li>
<li>查看环境变量：echo $PATH（：分隔）</li>
<li>加入新的环境变量：export      PATH=$PATH:/home/user/work</li>
<li>文件名以.开头表示隐藏文件</li>
<li>查看文件目录：ls -l</li>
<li>查看隐藏文件：ls -la</li>
<li>查看命令：man ls</li>
<li>删除文件/目录：rm</li>
<li>删除空目录：rmdir</li>
<li>修改文件权限：chmod 744 my_date</li>
<li>创建文件：touch filea</li>
<li>查看文件内容（二进制）：vi</li>
<li>查看文件内容（文本）：cat</li>
<li>查看文件类型（例如是否为可执行文件scripte;text;executable）：file 文件名</li>
<li>ls显示首字母表示文件类型：-表示文件；d表示目录，rwx×3分别为user、group、other</li>
<li>将文件a和文件b打包成mytar.tar：tar cf mytar.tar filea fileb（c表示create；f表示file，打包对文件大小不压缩）</li>
<li>查看tar文件：tar tvf  mytar.tar （t表示tar包具体文件和目录内容；v表示冗余详细信息；f表示file）</li>
<li>压缩tar文件：tar cjf mycompress.tar.bz2 filea fileb（j表示bz2压缩工具）</li>
<li>解压tar文件：tar xf  mytar.tar -C mytar（x表示解压；C表示category解压目录）</li>
<li>比较文件目录：diff -r  mycompress mytar （r表示recurrent）</li>
<li>对文件追加字符：echo  “aaa” &gt;&gt; mycompress/mydate </li>
<li>查找指定文件名的路径：find /usr -name “time.c”（/usr为目录，-name参数，time.c表示文件名，*ime.c表示多个字符或者?表示单个字符模糊查找）</li>
<li>限制查找文件的类型：find . -type f   -name “aaa”（f表示file文件；d表示directory目录）</li>
<li>限制查找用户的文件：find / -user  username</li>
<li>find高级应用：find /usr/src      -name “*.c” -exec wc -l {} ;（其中exec后面表示linux的命令并以；结尾，因此要加入转义字符\；wc -l表示统计一个文件的行数；{}表示一次匹配的结果）</li>
<li>find高级应用（复制）：find /usr/src/      -name “*.c” -exec cp {} src/ ;</li>
<li>find高级应用（统计数量）：find /usr/src      -name “*.c” &gt;&gt; count（将结果追加到count文件）</li>
<li>查找一个文件大小超过5M的文件：find . -type f      -size +5M</li>
<li>统计数量而不产生文件方法：find /usr/src      -name “*.c” &gt;&gt; count ; wc -l count ; rm count（一次执行多个命令）</li>
<li>显示行数：wc -l count（可查看数量）</li>
<li>统计字数：wc 命令 - c 统计字节数 - l 统计行数 - w </li>
<li>统计字数（基于管道）：find /usr/src      -name “*.c” | wc -l（左侧命令为右侧命令输入）</li>
<li>vi显示行号:set number （或set nu）</li>
<li>vi隐藏行号：set nonumber</li>
<li>vi跳转第一行1G；末行GG；n行nG</li>
<li>vi跳转行末尾$（shift+4）行首^（shift+6）</li>
<li>vi删除一行dd</li>
<li>vi撤销u</li>
<li>vi选中操作v</li>
<li>vi删除全文1G dG</li>
<li>vi复制一行yy；粘贴p；选中复制v y</li>
<li>vi剪切 x</li>
<li>vi搜索 /main（使用n进入下一个）或 ?main</li>
<li>vi自动缩进：光标到达某行输入100表示以下100行，按下==即自动缩进</li>
<li>vi代码补全：ctrl+p</li>
<li>查看主机名：hostname</li>
<li>修改主机名：vi /etc/sysconfig/network（重启生效）</li>
<li>修改主机名：vi /etc/hosts （添加本机IP和名称）</li>
<li>关闭防火墙（centos7以下）：service      iptables stop</li>
<li>关闭防火墙（centos7以上）：systemctl stop      firewalld.service</li>
<li>查看用户的登陆日志：last</li>
<li>给所有登录再本机的用户发消息：wall</li>
<li>给当前联机的用户发消息：write</li>
<li>查看每个用户最后的登陆时间：lastlog</li>
<li>显示当前目录：pwd</li>
<li>创建组：groupadd      groupname</li>
<li>修改文件组群：chgrp group      file</li>
<li>修改文件所有人：chown user file</li>
<li>实时查看文件：tailf</li>
<li>查看进程：jps</li>
<li>生成500个1M的文件：dd if=/dev/zero   of=test.txt bs=1M count=5000</li>
<li>time dd if …. 查看上一命令花费时间</li>
<li>RPM安装/更新/卸载：rpm -ivh 、rpm -Uvh、rpm -e</li>
<li>YUM安装/更新/卸载：yum install 、yum update、yum remove</li>
<li>显示全部定时任务：crontab -l </li>
<li>编辑定时任务：crontab -e </li>
<li>使用nohup提交作业并立即执行，同时重定向输出文件，末尾&amp;表示立即执行：nohup command   &gt; myout.file 2&gt;&amp;1 &amp;</li>
<li>获取当前年月日：today=’date      +%Y-%m-%d’</li>
<li>获取明天日期：date -d      next-day +%Y%m%d </li>
<li>获取昨天日期：date -d      last-day +%Y%m%d</li>
<li>获取昨天日期：date -d      “+%Y%m%d</li>
<li>获取上周年月日：date -d “7      days ago” + %Y%m%d</li>
<li>查看最近1000行日志：tail -1000      xx.out</li>
<li>动态实时查看后端日志：tail -f </li>
<li>查看某个端口是否被占用：netstat      -anp | grep 8080</li>
<li>查看当前所有已经使用的端口情况：netstat -nultp</li>
<li>显示进程pid：ps  -ef| grep java</li>
<li>查看服务器内存使用情况：free -m</li>
<li>查看所有状态：ps -aux | grep      java</li>
<li>杀死进程：kill -9 pid</li>
<li>创建链接文件：ln</li>
<li>启动tomcat：cd      /java/tomcat/bin          ./startup.sh    ./shutdown.sh（注意./为当前目录，../上层目录）</li>
<li>查看当前进程： ps；执行退出：      exit查看当前路径： pwd</li>
<li>软链接： ln -s slink      source；硬链接： ln link source</li>
<li>硬链接：通过文件系统的inode来产生新档名，而不是产生新档案。</li>
<li>软链接：看作是Windows中的快捷方式，可以让你快速链接到目标档案或目录。</li>
<li>终端是 /dev/tty文件夹；黑洞文件是/dev/null</li>
<li>查看后台任务:job -l</li>
<li>磁盘空间 df -h</li>
<li>查看文件的类型：file 文件名/目录名</li>
<li>立即关机：poweroff</li>
<li>取消关机：Shutdown -c</li>
<li>取消关机：pkill shutdown</li>
<li>5分钟之后自动关机：shutdown -h +5</li>
<li>重启：reboot</li>
<li>重启：shutdown -r now</li>
<li>查看端口是否打开：lsof -i : 端口号</li>
</ol>
<p><strong>Linux软件包管理：</strong></p>
<p>dpkg 管理工具，软件包名以.deb后缀。</p>
<blockquote>
<p>比如安装tree命令的安装包，先将tree.deb传到Linux系统中，再使用命令。</p>
<p>sudo dpkg -i tree_1.5.3-1_i386.deb     安装软件</p>
<p>sudo dpkg -r tree  卸载软件</p>
</blockquote>
<p>APT高级软件工具，适合系统能够连接互联网，以tree为例。</p>
<blockquote>
<p>sudo apt-get install tree    安装tree</p>
<p>sudo apt-get remove tree    卸载tree</p>
<p>sudo apt-get update      更新软件</p>
<p>sudo apt-get upgrade </p>
</blockquote>
<h3 id="系统目录"><a href="#系统目录" class="headerlink" title="系统目录"></a>系统目录</h3><ol>
<li>cd /  : 进入根目录</li>
<li>bin：可执行的二进制文件，通常放的是系统自带的文件</li>
<li>dev：Device，设备，通常系统的硬件被抽象成一个文件存放在dev中</li>
<li>initrd.img：开机启动时的图片</li>
<li>lost+found：异常关机时存放错误信息的文件</li>
<li>opt：Options，存放开发者自己开发并安装的软件</li>
<li>run：系统运行时需要的文件</li>
<li>srv：存放服务启动后需要访问的文件数据</li>
<li>usr：存放与用户直接相关的文件目录</li>
<li>boot：启动配置文件，启动时需要的核心文件</li>
<li>etc：配置文件（系统中各种所需要的配置文件）</li>
<li>lib、lib64：库，系统内置的库文件，自己安装的各种软件的动态或静态的链接，windows中的dll很相似。</li>
<li>media：媒体，存放是系统外接设备，如U盘，硬盘</li>
<li>proc：系统文件</li>
<li>sbin：系统管理员特用的二进制文件（root用户）</li>
<li>sys：系统文件</li>
<li>var：存放日志信息（启动日志，软件日志）</li>
<li>cdrom：挂载入口</li>
<li>home：家，每个用户都会在home目录下有一个自己的文件夹，这个文件夹的名称与用户名一致</li>
<li>mnt：挂载点，临时安装的挂载</li>
<li>root：超级管理员的目录</li>
<li>snap：全新的管理软件包的方式</li>
<li>tmp：临时文件</li>
</ol>
<p><strong>网络命令：</strong></p>
<ol>
<li>hostname</li>
</ol>
<blockquote>
<p>hostname 没有选项，显示主机名字</p>
<p>hostname –d 显示机器所属域名</p>
<p>hostname –f 显示完整的主机名和域名</p>
<p>hostname –i 显示当前机器的 ip 地址</p>
</blockquote>
<ol start="2">
<li><p>ping 确认网络连接是畅通的&amp;查看连接的速度信息。</p>
</li>
<li><p>ifconfig：显示当前网络设备配置</p>
</li>
<li><p>iwconfig：查看设置基本的 Wi-Fi 网络信息</p>
</li>
<li><p>nslookup：ip-&gt;hostname；hostname-&gt;ip</p>
</li>
<li><p>traceroute：查看数据包在提交到远程系统或网站时候所经过的路由器的 IP 地址、跳数和响应时间。</p>
</li>
<li><p>telnet：连接目标主机</p>
</li>
</ol>
<blockquote>
<p>telnet hostname port – 使用指定的端口 telnet 主机名，测试主机是否在线或者网络是否正常。</p>
</blockquote>
<ol start="8">
<li>ethtool</li>
</ol>
<blockquote>
<p>ethtool 允许你查看和更改网卡的许多设置（不包括 Wi-Fi 网卡）。你可以管理许多高级设置，包括 tx/rx、校验及网络唤醒功能。下面是一些你可能感兴趣的基本命令：</p>
<p>ethtool -i 显示一个特定网卡的驱动信息，检查软件兼容性时尤其有用</p>
<p>ethtool -p 启动一个适配器的指定行为，比如让适配器的 LED 灯闪烁，以帮助你在多个适配器或接口中标识接口名称</p>
<p>ethtool -s 显示网络统计信息</p>
<p>ethtool speed &lt;10|100|1000&gt; 设置适配器的连接速度，单位是 Mbps</p>
</blockquote>
<ol start="9">
<li>netstat</li>
</ol>
<blockquote>
<p>发现主机连接，你可以使用”netstat -g”查询该主机订阅的所有多播组（网络）</p>
<p>netstat -nap | grep port 将会显示使用该端口的应用程序的进程 id</p>
<p>netstat -a or netstat –all 将会显示包括 TCP 和 UDP 的所有连接</p>
<p>netstat –tcp or netstat –t 将会显示 TCP 连接</p>
<p>netstat –udp or netstat –u 将会显示 UDP 连接</p>
<p>netstat -g 将会显示该主机订阅的所有多播网络。</p>
</blockquote>
<h3 id="电脑B连接电脑A的虚拟机"><a href="#电脑B连接电脑A的虚拟机" class="headerlink" title="电脑B连接电脑A的虚拟机"></a>电脑B连接电脑A的虚拟机</h3><p>※ 以centos6.5为例（具体命令在不同版本有所不同）</p>
<p>（1）虚拟机配置为桥接模式</p>
<p>（2）vi /etc/sysconfig/network-scripts/ifcfg-eth0</p>
<p>配置为静态IP：</p>
<p>BOOTPROTO=”static”</p>
<p>IPADDR=192.168.1.80（电脑A的ip为192.168.1.42，于是我配置为192.168.1.80，将其配在同一网段）</p>
<p>GATEWAY=”192.168.1.1”</p>
<p>NETMASK=”255.255.255.0”</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/09/17/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Linux&shell/" data-id="ckmzn8px4001ej2tdfdkk34f3" data-title="日常笔记——Linux&amp;shell" class="article-share-link">Compartir</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/09/17/%E5%BF%AB%E9%80%9F%E7%94%9F%E6%88%90%E9%9D%99%E6%80%81%E9%A1%B5%E9%9D%A2%E2%80%94%E2%80%94MkDocs/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Nuevo</strong>
      <div class="article-nav-title">
        
          快速生成静态页面——MkDocs
        
      </div>
    </a>
  
  
    <a href="/2020/09/17/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98%E2%80%94%E2%80%94Jupyter%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%E8%A1%A5%E5%85%A8%E5%8A%9F%E8%83%BD/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Viejo</strong>
      <div class="article-nav-title">日常问题——Jupyter添加代码补全功能</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categorías</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Django/">Django</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Notes/">Notes</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Others/">Others</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SQL/">SQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Study/">Study</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cos/">cos</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/idea/">idea</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archivos</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Posts recientes</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/04/06/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Sentry/">日常笔记——Sentry</a>
          </li>
        
          <li>
            <a href="/2021/04/02/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94urljoin/">日常笔记——urljoin</a>
          </li>
        
          <li>
            <a href="/2021/04/01/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94k8s/">日常笔记——k8s</a>
          </li>
        
          <li>
            <a href="/2021/04/01/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/04/01/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Python/">日常笔记——Python</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 Jimmy Guo<br>
      Construido por <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>