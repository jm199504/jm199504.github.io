<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>æ—¥å¸¸ç¬”è®°â€”â€”docker | Jimmy&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="æ¦‚è¿°ï¼šæ—¥å¸¸ç¬”è®°â€”â€”docker">
<meta property="og:type" content="article">
<meta property="og:title" content="æ—¥å¸¸ç¬”è®°â€”â€”docker">
<meta property="og:url" content="http://example.com/2020/10/11/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94docker/index.html">
<meta property="og:site_name" content="Jimmy&#39;s blog">
<meta property="og:description" content="æ¦‚è¿°ï¼šæ—¥å¸¸ç¬”è®°â€”â€”docker">
<meta property="og:locale">
<meta property="og:image" content="https://gblobscdn.gitbook.com/assets%2F-M5xTVjmK7ax94c8ZQcm%2F-M5xT_hHX2g5ldlyp9nm%2F-M5xTdXNYDmRWNH-Lqez%2Fvirtualization.png?alt=media">
<meta property="og:image" content="https://gblobscdn.gitbook.com/assets%2F-M5xTVjmK7ax94c8ZQcm%2F-M5xT_hHX2g5ldlyp9nm%2F-M5xTdXP2scg0hxytUHA%2Fdocker.png?alt=media">
<meta property="article:published_time" content="2020-10-11T13:44:41.486Z">
<meta property="article:modified_time" content="2021-04-02T06:42:42.538Z">
<meta property="article:author" content="Jimmy Guo">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gblobscdn.gitbook.com/assets%2F-M5xTVjmK7ax94c8ZQcm%2F-M5xT_hHX2g5ldlyp9nm%2F-M5xTdXNYDmRWNH-Lqez%2Fvirtualization.png?alt=media">
  
    <link rel="alternate" href="/atom.xml" title="Jimmy's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jimmy&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-æ—¥å¸¸ç¬”è®°â€”â€”docker" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/10/11/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94docker/" class="article-date">
  <time class="dt-published" datetime="2020-10-11T13:44:41.486Z" itemprop="datePublished">2020-10-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Notes/">Notes</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      æ—¥å¸¸ç¬”è®°â€”â€”docker
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>æ¦‚è¿°ï¼šæ—¥å¸¸ç¬”è®°â€”â€”docker</p>
<span id="more"></span>

<h1 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.docker.com/get-started/overview/">Dockerå®˜æ–¹æ–‡æ¡£</a></p>
<p><a target="_blank" rel="noopener" href="https://yeasy.gitbook.io/docker_practice/">Dockerä»å…¥é—¨åˆ°å®è·µ</a></p>
</blockquote>
<h2 id="1-docker-amp-VM"><a href="#1-docker-amp-VM" class="headerlink" title="1.docker&amp;VM"></a>1.docker&amp;VM</h2><p>ä¼ ç»Ÿè™šæ‹ŸåŒ–</p>
<p><img src="https://gblobscdn.gitbook.com/assets%2F-M5xTVjmK7ax94c8ZQcm%2F-M5xT_hHX2g5ldlyp9nm%2F-M5xTdXNYDmRWNH-Lqez%2Fvirtualization.png?alt=media" alt="img"></p>
<p>Docker</p>
<p><img src="https://gblobscdn.gitbook.com/assets%2F-M5xTVjmK7ax94c8ZQcm%2F-M5xT_hHX2g5ldlyp9nm%2F-M5xTdXP2scg0hxytUHA%2Fdocker.png?alt=media" alt="img"></p>
<p>docker æ¶æ„</p>
<p>![image-20210126190803002](/Users/junmingguo/Library/Application Support/typora-user-images/image-20210126190803002.png)</p>
<p>dockeré•œåƒç”±æ–‡ä»¶+å…ƒæ•°æ®ç»„æˆï¼Œå…ƒæ•°æ®åŒ…æ‹¬ï¼šç¯å¢ƒå˜é‡ã€ç«¯å£æ˜ å°„ã€å·ç­‰å…¶å®ƒç»†èŠ‚</p>
<p>Container = cgroup + namespace + rootfs + Container Engine</p>
<p>cgroupå³ControlGroupï¼ŒLInuxæ“ä½œç³»ç»Ÿé€šè¿‡cgroupè®¾ç½®è¿›ç¨‹ä½¿ç”¨CPU å†…å­˜ IOèµ„æºçš„é™é¢</p>
<p>dockerè¿è¡Œå‘½ä»¤é…ç½®ï¼šâ€“cpu-shares, â€“memory, â€“device-write-bpså®é™…åœ¨é…ç½®cgroup</p>
<p>namespaceå®ç°äº†å®¹å™¨é—´èµ„æºçš„éš”ç¦»ï¼ŒLinuxä½¿ç”¨äº†å…­ç§namespaceï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ol>
<li><p>Mount</p>
</li>
<li><p>UTS namespace</p>
</li>
<li><p>IPC namespace</p>
</li>
<li><p>PID namespace</p>
</li>
<li><p>Network namespace</p>
</li>
<li><p>User namespace</p>
</li>
</ol>
<h2 id="2-åŸºæœ¬æ¦‚å¿µ"><a href="#2-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="2.åŸºæœ¬æ¦‚å¿µ"></a>2.åŸºæœ¬æ¦‚å¿µ</h2><h3 id="2-1-é•œåƒ"><a href="#2-1-é•œåƒ" class="headerlink" title="2.1 é•œåƒ"></a>2.1 é•œåƒ</h3><p> Docker é•œåƒï¼ˆImageï¼‰ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ª <code>root</code> æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ <code>ubuntu:18.04</code> å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥— Ubuntu 18.04 æœ€å°ç³»ç»Ÿçš„ <code>root</code> æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<h3 id="2-2-å®¹å™¨"><a href="#2-2-å®¹å™¨" class="headerlink" title="2.2 å®¹å™¨"></a>2.2 å®¹å™¨</h3><p>å®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚</p>
<h3 id="2-3-ä»“åº“"><a href="#2-3-ä»“åº“" class="headerlink" title="2.3 ä»“åº“"></a>2.3 ä»“åº“</h3><p>ä¸€ä¸ª <strong>Docker Registry</strong> ä¸­å¯ä»¥åŒ…å«å¤šä¸ª <strong>ä»“åº“</strong>ï¼ˆ<code>Repository</code>ï¼‰ï¼›æ¯ä¸ªä»“åº“å¯ä»¥åŒ…å«å¤šä¸ª <strong>æ ‡ç­¾</strong>ï¼ˆ<code>Tag</code>ï¼‰ï¼›æ¯ä¸ªæ ‡ç­¾å¯¹åº”ä¸€ä¸ªé•œåƒã€‚</p>
<p>é€šå¸¸ï¼Œä¸€ä¸ªä»“åº“ä¼šåŒ…å«åŒä¸€ä¸ªè½¯ä»¶ä¸åŒç‰ˆæœ¬çš„é•œåƒï¼Œè€Œæ ‡ç­¾å°±å¸¸ç”¨äºå¯¹åº”è¯¥è½¯ä»¶çš„å„ä¸ªç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>&lt;ä»“åº“å&gt;:&lt;æ ‡ç­¾&gt;</code> çš„æ ¼å¼æ¥æŒ‡å®šå…·ä½“æ˜¯è¿™ä¸ªè½¯ä»¶å“ªä¸ªç‰ˆæœ¬çš„é•œåƒã€‚å¦‚æœä¸ç»™å‡ºæ ‡ç­¾ï¼Œå°†ä»¥ <code>latest</code> ä½œä¸ºé»˜è®¤æ ‡ç­¾ã€‚</p>
<h2 id="3-ç›®æ ‡åŠä½¿ç”¨åœºæ™¯"><a href="#3-ç›®æ ‡åŠä½¿ç”¨åœºæ™¯" class="headerlink" title="3.ç›®æ ‡åŠä½¿ç”¨åœºæ™¯"></a>3.ç›®æ ‡åŠä½¿ç”¨åœºæ™¯</h2><h3 id="3-1-ç›®æ ‡"><a href="#3-1-ç›®æ ‡" class="headerlink" title="3.1 ç›®æ ‡"></a>3.1 ç›®æ ‡</h3><p>æä¾›ç®€å•è½»é‡çš„å»ºæ¨¡æ–¹å¼</p>
<p>èŒè´£çš„é€»è¾‘åˆ†ç¦»</p>
<p>å¿«é€Ÿé«˜æ•ˆçš„å¼€å‘ç”Ÿå‘½å‘¨æœŸ</p>
<p>é¼“åŠ±ä½¿ç”¨é¢å‘æœåŠ¡çš„æ¶æ„</p>
<h3 id="3-2-ä½¿ç”¨åœºæ™¯"><a href="#3-2-ä½¿ç”¨åœºæ™¯" class="headerlink" title="3.2 ä½¿ç”¨åœºæ™¯"></a>3.2 ä½¿ç”¨åœºæ™¯</h3><p>ï¼ˆ1ï¼‰ä½¿ç”¨dockerå®¹å™¨å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²æœåŠ¡</p>
<p>ï¼ˆ2ï¼‰åˆ›å»ºéš”ç¦»çš„è¿è¡Œç¯å¢ƒ</p>
<p>ï¼ˆ3ï¼‰æ­å»ºæµ‹è¯•ç¯å¢ƒ</p>
<p>ï¼ˆ4ï¼‰æ„å»ºå¤šç”¨æˆ·çš„å¹³å°å³æœåŠ¡ï¼ˆPaaSï¼‰åŸºç¡€è®¾æ–½</p>
<p>ï¼ˆ5ï¼‰æä¾›è½¯ä»¶å³æœåŠ¡ï¼ˆSaaSï¼‰åº”ç”¨ç¨‹åº</p>
<p>ï¼ˆ6ï¼‰é«˜æ€§èƒ½ã€è¶…å¤§è§„æ¨¡çš„å®¿ä¸»æœºéƒ¨ç½²</p>
<h3 id="3-3-èƒ½åŠ›"><a href="#3-3-èƒ½åŠ›" class="headerlink" title="3.3 èƒ½åŠ›"></a>3.3 èƒ½åŠ›</h3><p>ï¼ˆ1ï¼‰æ–‡ä»¶ç³»ç»Ÿéš”ç¦»ï¼šæ¯ä¸€ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±çš„rootæ–‡ä»¶ç³»ç»Ÿ</p>
<p>ï¼ˆ2ï¼‰è¿›ç¨‹éš”ç¦»ï¼šæ¯ä¸€ä¸ªå®¹å™¨éƒ½è¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹ç¯å¢ƒä¸­</p>
<p>ï¼ˆ3ï¼‰ç½‘ç»œéš”ç¦»ï¼šå®¹å™¨é—´çš„è™šæ‹Ÿç½‘ç»œæ¥å£å’ŒIPåœ°å€æ˜¯åˆ†å¼€çš„</p>
<p>ï¼ˆ4ï¼‰èµ„æºéš”ç¦»å’Œåˆ†ç»„ï¼šä½¿ç”¨cgroupå°†cpuå’Œå†…å­˜ä¹‹ç±»çš„èµ„æºç‹¬ç«‹åˆ†é…ç»™æ¯ä¸€ä¸ªdockerå®¹å™¨</p>
<h2 id="4-å¸¸è§å‘½ä»¤"><a href="#4-å¸¸è§å‘½ä»¤" class="headerlink" title="4.å¸¸è§å‘½ä»¤"></a>4.å¸¸è§å‘½ä»¤</h2><h3 id="1-åŸºç¡€"><a href="#1-åŸºç¡€" class="headerlink" title="1.åŸºç¡€"></a>1.åŸºç¡€</h3><h3 id="1-1-å®‰è£…docker-mac-OS"><a href="#1-1-å®‰è£…docker-mac-OS" class="headerlink" title="1.1 å®‰è£…docker(mac OS)"></a>1.1 å®‰è£…docker(mac OS)</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask install docker</span><br></pre></td></tr></table></figure>

<h3 id="1-2-æŸ¥çœ‹dockerç‰ˆæœ¬"><a href="#1-2-æŸ¥çœ‹dockerç‰ˆæœ¬" class="headerlink" title="1.2 æŸ¥çœ‹dockerç‰ˆæœ¬"></a>1.2 æŸ¥çœ‹dockerç‰ˆæœ¬</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker --version</span><br><span class="line"># Docker version <span class="number">19</span>.<span class="number">03</span>.<span class="number">8</span>, build afacb8b</span><br><span class="line">docker-compose --version</span><br><span class="line"># docker-compose version <span class="number">1</span>.<span class="number">25</span>.<span class="number">5</span>, build <span class="number">8</span>a1c60f6</span><br><span class="line">docker-machine --version</span><br><span class="line"># docker-machine version <span class="number">0</span>.<span class="number">16</span>.<span class="number">1</span>, build cce350d7</span><br></pre></td></tr></table></figure>

<h3 id="1-3-æµ‹è¯•dockeræ˜¯å¦æˆåŠŸå®‰è£…"><a href="#1-3-æµ‹è¯•dockeræ˜¯å¦æˆåŠŸå®‰è£…" class="headerlink" title="1.3 æµ‹è¯•dockeræ˜¯å¦æˆåŠŸå®‰è£…"></a>1.3 æµ‹è¯•dockeræ˜¯å¦æˆåŠŸå®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br><span class="line"><span class="meta">#</span><span class="bash"> é¦–å…ˆä¼šæ˜¾ç¤ºæ— æ³•åœ¨æœ¬åœ°å¯»æ‰¾åˆ°`hello-world`é•œåƒï¼Œä¹‹åä¼šè¿›è¡Œæ‹‰å–</span></span><br></pre></td></tr></table></figure>

<h3 id="1-5-ç™»å½•è¿œç¨‹-login"><a href="#1-5-ç™»å½•è¿œç¨‹-login" class="headerlink" title="1.5 ç™»å½•è¿œç¨‹ login"></a>1.5 ç™»å½•è¿œç¨‹ login</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> docker login -u &lt;ç”¨æˆ·å&gt; -p &lt;å¯†ç &gt; &lt;URL&gt;</span></span><br><span class="line">docker login -u username -p password registry</span><br><span class="line"><span class="meta">#</span><span class="bash"> docker login -u junmingguo -p guojunming123 csighub.tencentyun.com</span></span><br></pre></td></tr></table></figure>

<h3 id="1-6-æŸ¥çœ‹å®¹å™¨ç½‘ç»œåˆ—è¡¨-ls"><a href="#1-6-æŸ¥çœ‹å®¹å™¨ç½‘ç»œåˆ—è¡¨-ls" class="headerlink" title="1.6 æŸ¥çœ‹å®¹å™¨ç½‘ç»œåˆ—è¡¨ ls"></a>1.6 æŸ¥çœ‹å®¹å™¨ç½‘ç»œåˆ—è¡¨ ls</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker network ls</span><br><span class="line">--network&#x3D;host æŒ‡å®šä½¿ç”¨hostç½‘ç»œ</span><br><span class="line"></span><br><span class="line">ifconfig docker0 æŸ¥çœ‹ç½‘ç»œ</span><br></pre></td></tr></table></figure>

<h3 id="â€”â€”â€”â€”â€”â€”â€”â€”â€”"><a href="#â€”â€”â€”â€”â€”â€”â€”â€”â€”" class="headerlink" title="â€”â€”â€”â€”â€”â€”â€”â€”â€”"></a>â€”â€”â€”â€”â€”â€”â€”â€”â€”</h3><h3 id="2-å®¹å™¨"><a href="#2-å®¹å™¨" class="headerlink" title="2. å®¹å™¨"></a>2. å®¹å™¨</h3><h3 id="2-1-è¿›å…¥å®¹å™¨-exec"><a href="#2-1-è¿›å…¥å®¹å™¨-exec" class="headerlink" title="2.1 è¿›å…¥å®¹å™¨ exec"></a>2.1 è¿›å…¥å®¹å™¨ exec</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it CONTAINER_ID/NAME bash</span><br><span class="line"><span class="meta">#</span><span class="bash"> è‹¥ä¿®æ”¹äº†å®¹å™¨æ–‡ä»¶ï¼Œå¯ä½¿ç”¨docker differ webserver æŸ¥çœ‹æ”¹åŠ¨å†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> or docker attach CONTAINER_ID (ä¸æ–¹ä¾¿ï¼Œå½“å¤šä¸ªçª—å£åŒæ—¶ attach åˆ°åŒä¸€ä¸ªå®¹å™¨çš„æ—¶å€™ï¼Œæ‰€æœ‰çª—å£éƒ½ä¼šåŒæ­¥æ˜¾ç¤ºã€‚å½“æŸä¸ªçª—å£å› å‘½ä»¤é˜»å¡æ—¶,å…¶ä»–çª—å£ä¹Ÿæ— æ³•æ‰§è¡Œæ“ä½œäº†ã€‚)</span> </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> é€€å‡º</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">exit</span> å…³é—­å®¹å™¨å¹¶é€€å‡º</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ctrl + q + p ä¸å…³é—­å®¹å™¨ï¼Œé‡æ–°å®šä½åˆ°æœ¬åœ°ç›®å½•</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-æŸ¥çœ‹å®¹å™¨-ps"><a href="#2-2-æŸ¥çœ‹å®¹å™¨-ps" class="headerlink" title="2.2 æŸ¥çœ‹å®¹å™¨ ps"></a>2.2 æŸ¥çœ‹å®¹å™¨ ps</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨</span><br><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹å®¹å™¨è®¿é—®æ—¥å¿—</span><br><span class="line">docker logs CONTAINER_ID</span><br></pre></td></tr></table></figure>

<h3 id="2-3-åˆ é™¤å®¹å™¨-rm"><a href="#2-3-åˆ é™¤å®¹å™¨-rm" class="headerlink" title="2.3 åˆ é™¤å®¹å™¨ rm"></a>2.3 åˆ é™¤å®¹å™¨ rm</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker rm CONTAINER_ID</span><br><span class="line">docker container prune  # æ¸…é™¤æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨</span><br></pre></td></tr></table></figure>

<h3 id="2-4-è¿è¡Œå®¹å™¨-run"><a href="#2-4-è¿è¡Œå®¹å™¨-run" class="headerlink" title="2.4 è¿è¡Œå®¹å™¨ run"></a>2.4 è¿è¡Œå®¹å™¨ run</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">docker run -it python</span><br><span class="line"></span><br><span class="line">-t é€‰é¡¹è®©Dockeråˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼ˆpseudo-ttyï¼‰å¹¶ç»‘å®šåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¸Š</span><br><span class="line">-i åˆ™è®©å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¿æŒæ‰“å¼€</span><br><span class="line">-d åœ¨åå°å¼€å¯è¿›ç¨‹</span><br><span class="line"></span><br><span class="line">eg. docker run </span><br><span class="line">-itd </span><br><span class="line">-p 8082:8082 </span><br><span class="line">-v &#x2F;Users&#x2F;sam&#x2F;Desktop&#x2F;service-a.jar:&#x2F;usr&#x2F;service-a.jar </span><br><span class="line">--name service-a </span><br><span class="line">d23bdf5b1b1b java -jar &#x2F;usr&#x2F;service-a.jar</span><br><span class="line"></span><br><span class="line">-p 8082:8082é…ç½®æ˜ å°„ç«¯å£ åˆ†åˆ«è¡¨ç¤º&#x3D;&gt;æˆ‘çš„ç«¯å£:è™šæ‹Ÿæœºç«¯å£ å³æŠŠè™šæ‹Ÿæœºä¸­çš„8082ç«¯å£æ˜ å°„åˆ°æˆ‘çš„ç”µè„‘ä¸Šçš„8082ä¸Š</span><br><span class="line"></span><br><span class="line">-v &#x2F;Users&#x2F;sam&#x2F;Desktop&#x2F;service-a.jar:&#x2F;usr&#x2F;service-a.jar è¡¨ç¤ºå°†jaræ–‡ä»¶æŒ‚è½½åˆ°è™šæ‹Ÿæœºç›®å½•ï¼Œå†’å·å‰ååˆ†åˆ«æ˜¯è‡ªå·±çš„jaræ–‡ä»¶è·¯å¾„å’ŒæŒ‚è½½åˆ°è™šæ‹Ÿæœºä¸­çš„è·¯å¾„ã€å¦‚æœdocker images å­˜åœ¨é•œåƒåˆ™æ— éœ€æŒ‚è½½ã€‘</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--name service-a å®šä¹‰å®¹å™¨åç§° service-a</span><br><span class="line">d23bdf5b1b1b java -jar &#x2F;usr&#x2F;service-a.jar d23bdf5b1b1b æ˜¯javaé•œåƒçš„IDå·ï¼›java -jar &#x2F;usr&#x2F;service-a.jar è¿è¡Œjaræ–‡ä»¶çš„å‘½ä»¤ï¼ˆå› ä¸ºjaræ–‡ä»¶ä¸­åŒ…å«tomcatæ‰€ä»¥ç›´æ¥è¿è¡Œå°±å¯ä»¥å¼€å¯ä½ çš„å¾®æœåŠ¡ï¼‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-i, --interactive Keep STDIN open even if not attached</span><br><span class="line">-t, --tty         Allocate a pseudo-TTY</span><br><span class="line">-d, --detach      Run container in background and print container ID</span><br></pre></td></tr></table></figure>

<p>å®ˆæŠ¤æ€è¿è¡Œå®¹å™¨ï¼šè®© Docker å®¹å™¨åœ¨åå°ä»¥å®ˆæŠ¤æ€ï¼ˆDaemonizedï¼‰å½¢å¼è¿è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -d ubuntu:18.04 </span><br><span class="line"><span class="meta">#</span><span class="bash"> -d ä¼šå°†å®¹å™¨çš„è¾“å‡ºç»“æœä¿å­˜ï¼Œè€Œä¸æ˜¯ç›´æ¥è¾“å‡ºè‡³ç»ˆç«¯ï¼Œä¼šè¿”å›ä¸€ä¸²id</span></span><br><span class="line"></span><br><span class="line">docker container ls  # æŸ¥çœ‹å®¹å™¨åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">docker container logs &lt;CONTAINER_ID or CONTAIN_NAME&gt;  # æŸ¥çœ‹å®¹å™¨è¾“å‡ºä¿¡æ¯</span><br></pre></td></tr></table></figure>

<p>å®¹å™¨å¯¹èµ„æºçš„ä½¿ç”¨é™åˆ¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -it -c 1024 --memory 200M --memory-swap 300M --blkio-weight 600 ubuntu bash</span><br><span class="line">-m,--memory å†…å­˜ä½¿ç”¨é™é¢</span><br><span class="line">--memory-swap è®¾ç½®å†…å­˜+swapä½¿ç”¨é™é¢</span><br><span class="line">-c,--cpu-shares CPUé™åˆ¶æƒé‡å€¼ï¼Œé»˜è®¤1024</span><br><span class="line">--blkio-weight å®¹å™¨å¯å¹³ç­‰è¯»å†™ç¡¬ç›˜</span><br><span class="line">--device-read-bps é™åˆ¶è®¾å¤‡bps</span><br></pre></td></tr></table></figure>

<h3 id="2-5-å¯åŠ¨å’Œç»ˆæ­¢å®¹å™¨-start-stop"><a href="#2-5-å¯åŠ¨å’Œç»ˆæ­¢å®¹å™¨-start-stop" class="headerlink" title="2.5 å¯åŠ¨å’Œç»ˆæ­¢å®¹å™¨ start/stop"></a>2.5 å¯åŠ¨å’Œç»ˆæ­¢å®¹å™¨ start/stop</h3><p>å¯åŠ¨æ—¶é’ˆå¯¹å·²ç»ç»ˆæ­¢çš„å®¹å™¨å¯åŠ¨è¿è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker container start</span><br><span class="line">docker container stop  # ç»ˆæ­¢ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨</span><br><span class="line">docker container restart</span><br><span class="line">docker container ls -a  # å¯æŸ¥çœ‹åˆ°ç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨</span><br></pre></td></tr></table></figure>

<h3 id="2-6-é‡æ–°å¯åŠ¨-åœæ­¢å®¹å™¨"><a href="#2-6-é‡æ–°å¯åŠ¨-åœæ­¢å®¹å™¨" class="headerlink" title="2.6 é‡æ–°å¯åŠ¨/åœæ­¢å®¹å™¨"></a>2.6 é‡æ–°å¯åŠ¨/åœæ­¢å®¹å™¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker start CONTAINER-ID</span><br><span class="line">docker stop CONTAINER-ID</span><br></pre></td></tr></table></figure>

<h3 id="2-7-å¯¼å‡ºå®¹å™¨-export"><a href="#2-7-å¯¼å‡ºå®¹å™¨-export" class="headerlink" title="2.7 å¯¼å‡ºå®¹å™¨ export"></a>2.7 å¯¼å‡ºå®¹å™¨ export</h3><p>å¯¼å‡ºå®¹å™¨å¿«ç…§åˆ°æœ¬åœ°æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker export 7691a814370e &gt; ubuntu.tar</span><br></pre></td></tr></table></figure>

<h3 id="2-8-å¯¼å…¥å®¹å™¨-import"><a href="#2-8-å¯¼å…¥å®¹å™¨-import" class="headerlink" title="2.8 å¯¼å…¥å®¹å™¨ import"></a>2.8 å¯¼å…¥å®¹å™¨ import</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker import - test&#x2F;ubuntu:v1.0</span><br></pre></td></tr></table></figure>



<h3 id="â€”â€”â€”â€”â€”â€”â€”â€”â€”-1"><a href="#â€”â€”â€”â€”â€”â€”â€”â€”â€”-1" class="headerlink" title="â€”â€”â€”â€”â€”â€”â€”â€”â€”"></a>â€”â€”â€”â€”â€”â€”â€”â€”â€”</h3><h3 id="3-é•œåƒ"><a href="#3-é•œåƒ" class="headerlink" title="3. é•œåƒ"></a>3. é•œåƒ</h3><h3 id="3-1-æ‹‰å–é•œåƒ-pull"><a href="#3-1-æ‹‰å–é•œåƒ-pull" class="headerlink" title="3.1 æ‹‰å–é•œåƒ pull"></a>3.1 æ‹‰å–é•œåƒ pull</h3><p>ä» Docker é•œåƒä»“åº“è·å–é•œåƒçš„å‘½ä»¤æ˜¯ <code>docker pull</code>ã€‚å…¶å‘½ä»¤æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull [é€‰é¡¹] [Docker Registry åœ°å€[:ç«¯å£å·]&#x2F;]ä»“åº“å[:æ ‡ç­¾]</span><br></pre></td></tr></table></figure>

<p>å…·ä½“çš„é€‰é¡¹å¯ä»¥é€šè¿‡ <code>docker pull --help</code> å‘½ä»¤çœ‹åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬è¯´ä¸€ä¸‹é•œåƒåç§°çš„æ ¼å¼ã€‚</p>
<ul>
<li>Docker é•œåƒä»“åº“åœ°å€ï¼šåœ°å€çš„æ ¼å¼ä¸€èˆ¬æ˜¯ <code>&lt;åŸŸå/IP&gt;[:ç«¯å£å·]</code>ã€‚é»˜è®¤åœ°å€æ˜¯ Docker Hub(docker.io)ã€‚</li>
<li>ä»“åº“åï¼šå¦‚ä¹‹å‰æ‰€è¯´ï¼Œè¿™é‡Œçš„ä»“åº“åæ˜¯ä¸¤æ®µå¼åç§°ï¼Œå³ <code>&lt;ç”¨æˆ·å&gt;/&lt;è½¯ä»¶å&gt;</code>ã€‚å¯¹äº Docker Hubï¼Œå¦‚æœä¸ç»™å‡ºç”¨æˆ·åï¼Œåˆ™é»˜è®¤ä¸º <code>library</code>ï¼Œä¹Ÿå°±æ˜¯å®˜æ–¹é•œåƒã€‚</li>
</ul>
<p>æ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull ubuntu:18.04</span><br></pre></td></tr></table></figure>

<p>ä»Docker Hubæ‹‰å–é•œåƒ </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker search centos  # æœç´¢centosç›¸å…³çš„é•œåƒ</span><br><span class="line">docker pull centos  # æ‹‰å–centosé•œåƒ</span><br></pre></td></tr></table></figure>

<h3 id="3-2-è¿è¡ŒæŒ‡å®šé•œåƒ-run"><a href="#3-2-è¿è¡ŒæŒ‡å®šé•œåƒ-run" class="headerlink" title="3.2 è¿è¡ŒæŒ‡å®šé•œåƒ run"></a>3.2 è¿è¡ŒæŒ‡å®šé•œåƒ run</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm ubuntu:18.04 bash</span><br></pre></td></tr></table></figure>

<p>å‚æ•°è¯´æ˜ï¼š</p>
<p><code>-it</code>ï¼šè¿™æ˜¯ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ <code>-i</code>ï¼šäº¤äº’å¼æ“ä½œï¼Œä¸€ä¸ªæ˜¯ <code>-t</code> ç»ˆç«¯ã€‚æˆ‘ä»¬è¿™é‡Œæ‰“ç®—è¿›å…¥ <code>bash</code> æ‰§è¡Œä¸€äº›å‘½ä»¤å¹¶æŸ¥çœ‹è¿”å›ç»“æœï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦äº¤äº’å¼ç»ˆç«¯ã€‚</p>
<p><code>--rm</code>ï¼šè¿™ä¸ªå‚æ•°æ˜¯è¯´å®¹å™¨é€€å‡ºåéšä¹‹å°†å…¶åˆ é™¤ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ºäº†æ’éšœéœ€æ±‚ï¼Œé€€å‡ºçš„å®¹å™¨å¹¶ä¸ä¼šç«‹å³åˆ é™¤ï¼Œé™¤éæ‰‹åŠ¨ <code>docker rm</code>ã€‚æˆ‘ä»¬è¿™é‡Œåªæ˜¯éšä¾¿æ‰§è¡Œä¸ªå‘½ä»¤ï¼Œçœ‹çœ‹ç»“æœï¼Œä¸éœ€è¦æ’éšœå’Œä¿ç•™ç»“æœï¼Œå› æ­¤ä½¿ç”¨ <code>--rm</code> å¯ä»¥é¿å…æµªè´¹ç©ºé—´ã€‚</p>
<p><code>ubuntu:18.04</code>ï¼šè¿™æ˜¯æŒ‡ç”¨ <code>ubuntu:18.04</code> é•œåƒä¸ºåŸºç¡€æ¥å¯åŠ¨å®¹å™¨ã€‚</p>
<p><code>bash</code>ï¼šæ”¾åœ¨é•œåƒååçš„æ˜¯ <strong>å‘½ä»¤</strong>ï¼Œè¿™é‡Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ªäº¤äº’å¼ Shellï¼Œå› æ­¤ç”¨çš„æ˜¯ <code>bash</code>ã€‚</p>
<p><strong>å¯åŠ¨å®¹å™¨å¹¶è¿è¡Œnginx</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run --name webserver -d -p <span class="number">80</span>:<span class="number">80</span> nginx</span><br><span class="line"># webserver å®¹å™¨åç§°</span><br><span class="line"># -d: åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨ID</span><br><span class="line"># -p: æŒ‡å®šç«¯å£æ˜ å°„ï¼šæ ¼å¼æœ¬åœ° <span class="number">80</span> ç«¯å£ æ˜ å°„åˆ°å®¹å™¨çš„ <span class="number">80</span> ç«¯å£</span><br><span class="line"># -p <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>::<span class="number">80</span> åˆ™æœ¬åœ°ä»»æ„ç«¯å£ï¼Œæœ¬åœ°ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªç«¯å£</span><br><span class="line"># è®¿é—®http://localhostå³å¯</span><br></pre></td></tr></table></figure>

<p><strong>å¯åŠ¨å®šåˆ¶çš„é•œåƒ</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mywebserver -d -p 81:80 nginx:v2</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜ å°„åˆ°81ç«¯å£</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ================================================</span></span><br><span class="line">docker run -t -i ubuntu:18.04 </span><br><span class="line"><span class="meta">#</span><span class="bash"> -t é€‰é¡¹è®©Dockeråˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼ˆpseudo-ttyï¼‰å¹¶ç»‘å®šåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¸Š</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -i è®©å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¿æŒæ‰“å¼€</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-æŸ¥çœ‹æœ¬åœ°é•œåƒåˆ—è¡¨-images"><a href="#3-3-æŸ¥çœ‹æœ¬åœ°é•œåƒåˆ—è¡¨-images" class="headerlink" title="3.3 æŸ¥çœ‹æœ¬åœ°é•œåƒåˆ—è¡¨ images"></a>3.3 æŸ¥çœ‹æœ¬åœ°é•œåƒåˆ—è¡¨ images</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker image ls [CONTAINER_NAME]</span><br><span class="line"><span class="meta">#</span><span class="bash"> æˆ–è€… docker images</span></span><br></pre></td></tr></table></figure>

<p>åˆ—è¡¨åŒ…å«äº† <code>ä»“åº“å</code>ã€<code>æ ‡ç­¾</code>ã€<code>é•œåƒ ID</code>ã€<code>åˆ›å»ºæ—¶é—´</code> ä»¥åŠ <code>æ‰€å ç”¨çš„ç©ºé—´</code>ã€‚</p>
<p>å…¶ä¸­é•œåƒIDæ˜¯é•œåƒçš„å”¯ä¸€æ ‡è¯†ï¼Œè€Œä¸€ä¸ªé•œåƒå¯ä»¥å¯¹åº”å¤šä¸ªæ ‡ç­¾ï¼Œå…¶ä¸­ä½ å¯èƒ½å‘ç°å­˜åœ¨<none>çš„ä»“åº“åï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p>![image-20201021195826724](/Users/junmingguo/Library/Application Support/typora-user-images/image-20201021195826724.png)</p>
<p><none>é•œåƒç§°ä¸ºæ— æ ‡ç­¾é•œåƒï¼Œä¹Ÿç§°ä¸ºè™šæ‚¬é•œåƒï¼ˆdangling imageï¼‰</p>
<p><strong>æŸ¥çœ‹è™šæ‚¬é•œåƒ</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image ls -f dangling&#x3D;true</span><br></pre></td></tr></table></figure>

<p><strong>åˆ é™¤è™šæ‚¬é•œåƒ</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image prune</span><br></pre></td></tr></table></figure>

<p><strong>æŸ¥çœ‹é•œåƒã€å®¹å™¨ã€æ•°æ®å·æ‰€å ç”¨çš„ç©ºé—´</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker system df</span><br></pre></td></tr></table></figure>

<h3 id="3-4-åˆ é™¤æœ¬åœ°é•œåƒ-rmi"><a href="#3-4-åˆ é™¤æœ¬åœ°é•œåƒ-rmi" class="headerlink" title="3.4 åˆ é™¤æœ¬åœ°é•œåƒ rmi"></a>3.4 åˆ é™¤æœ¬åœ°é•œåƒ rmi</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker image rm IMAGE_ID</span><br><span class="line">docker rmi IMAGE_ID</span><br><span class="line"></span><br><span class="line"># å¼ºåˆ¶åˆ é™¤é•œåƒ</span><br><span class="line">docker rmi -f IMAGE_ID</span><br></pre></td></tr></table></figure>

<p>è‹¥é•œåƒæ‰€åœ¨çš„å®¹å™¨æ­£åœ¨è¿è¡Œï¼Œä¼šå‡ºç°åˆ é™¤é•œåƒå¤±è´¥çš„æƒ…å†µã€‚</p>
<p>æ‰¹é‡åˆ é™¤é•œåƒ -&gt; åŒ…å«noneæ–‡å­—çš„æ‰€æœ‰é•œåƒ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi $(docker images | grep &quot;none&quot; | awk &#39;&#123;print $3&#125;&#39;) </span><br></pre></td></tr></table></figure>

<h3 id="3-5-ä¿å­˜å®¹å™¨æˆé•œåƒ-commit"><a href="#3-5-ä¿å­˜å®¹å™¨æˆé•œåƒ-commit" class="headerlink" title="3.5 ä¿å­˜å®¹å™¨æˆé•œåƒ commit"></a>3.5 ä¿å­˜å®¹å™¨æˆé•œåƒ commit</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> docker commit [é€‰é¡¹] &lt;å®¹å™¨IDæˆ–å®¹å™¨å&gt; [&lt;ä»“åº“å&gt;[:&lt;æ ‡ç­¾&gt;]]</span></span><br><span class="line">eg.</span><br><span class="line">docker commit --author &quot;junming&quot; --message &quot;update something&quot; webserver nginx:v2 </span><br><span class="line"></span><br><span class="line">docker commit b72ad733f605 java/service-a</span><br><span class="line"><span class="meta">#</span><span class="bash"> b72ad733f605 å®¹å™¨ID</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> java/service-a é•œåƒåç§°</span></span><br></pre></td></tr></table></figure>

<h3 id="3-6-åˆ›å»ºé•œåƒ-build"><a href="#3-6-åˆ›å»ºé•œåƒ-build" class="headerlink" title="3.6 åˆ›å»ºé•œåƒ build"></a>3.6 åˆ›å»ºé•œåƒ build</h3><p>ä½¿ç”¨Dockerfileåˆ›å»ºé•œåƒï¼Œå…¶ä¸­Dockerfileç¤ºä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">FROM python:3.7</span><br><span class="line"></span><br><span class="line">ENV TZ&#x3D;PRC</span><br><span class="line"></span><br><span class="line"># é•œåƒæºè®¾ç½®ï¼Œä¸€èˆ¬ä¸ä¼šæœ‰ä¿®æ”¹</span><br><span class="line">COPY docker&#x2F;pip.conf &#x2F;etc&#x2F;</span><br><span class="line">COPY docker&#x2F;sources.list &#x2F;etc&#x2F;apt&#x2F;</span><br><span class="line"></span><br><span class="line"># å¤åˆ¶ vim å®‰è£…è„šæœ¬</span><br><span class="line">COPY docker&#x2F;install_vim.sh &#x2F;usr&#x2F;local&#x2F;bin&#x2F;</span><br><span class="line"></span><br><span class="line"># supervisor é…ç½®</span><br><span class="line">COPY docker&#x2F;supervisord.*.conf &#x2F;etc&#x2F;</span><br><span class="line"></span><br><span class="line"># å¤åˆ¶å¹¶å®‰è£…é¡¹ç›®ä¾èµ–</span><br><span class="line">COPY requirements.txt &#x2F;app&#x2F;</span><br><span class="line">RUN pip3 install --use-feature&#x3D;2020-resolver -r &#x2F;app&#x2F;requirements.txt supervisor uwsgi</span><br><span class="line"></span><br><span class="line"># å¤åˆ¶é¡¹ç›®æ–‡ä»¶</span><br><span class="line">COPY . &#x2F;app&#x2F;</span><br><span class="line">WORKDIR &#x2F;app</span><br><span class="line"></span><br><span class="line"># æ”¶é›†é™æ€æ–‡ä»¶</span><br><span class="line">RUN python3 manage.py collectstatic --noinput</span><br><span class="line"></span><br><span class="line"># åˆ é™¤æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶ï¼Œå‡å°‘é•œåƒå¤§å°</span><br><span class="line">RUN rm -rf &#x2F;tmp&#x2F;*</span><br><span class="line"></span><br><span class="line">EXPOSE 80</span><br></pre></td></tr></table></figure>

<p>å°†Dockerfileæ‰“åŒ…æˆtar</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker build . -f Dockerfile -t IMAGE_NAME --network host</span><br><span class="line"></span><br><span class="line"># docker build [é€‰é¡¹] &lt;ä¸Šä¸‹æ–‡è·¯å¾„&#x2F;URL&gt;</span><br><span class="line">eg.</span><br><span class="line">docker build -f Dockerfile -t abc.com&#x2F;cd&#x2F;scheduler:TAG1 --network host</span><br><span class="line"># -f æŒ‡å®šDockfileæ–‡ä»¶</span><br><span class="line"># -t ä¸Šä¸‹æ–‡è·¯å¾„&#x2F;URL</span><br><span class="line"># --network åœ¨æ„å»ºæœŸé—´è®¾ç½®RUNæŒ‡ä»¤çš„ç½‘ç»œæ¨¡å¼</span><br></pre></td></tr></table></figure>

<h3 id="3-7-æ¨é€é•œåƒè‡³æŒ‡å®šä½ç½®-push"><a href="#3-7-æ¨é€é•œåƒè‡³æŒ‡å®šä½ç½®-push" class="headerlink" title="3.7 æ¨é€é•œåƒè‡³æŒ‡å®šä½ç½® push"></a>3.7 æ¨é€é•œåƒè‡³æŒ‡å®šä½ç½® push</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push URL+è·¯å¾„:tag</span><br></pre></td></tr></table></figure>

<h3 id="3-8-é•œåƒé‡å‘½å-tag"><a href="#3-8-é•œåƒé‡å‘½å-tag" class="headerlink" title="3.8 é•œåƒé‡å‘½å tag"></a>3.8 é•œåƒé‡å‘½å tag</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag IMAGE_ID IMAGE_NAME</span><br></pre></td></tr></table></figure>

<h3 id="3-9-ä¿å­˜é•œåƒ-save"><a href="#3-9-ä¿å­˜é•œåƒ-save" class="headerlink" title="3.9 ä¿å­˜é•œåƒ save"></a>3.9 ä¿å­˜é•œåƒ save</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># å°†é•œåƒå¯¼å‡ºä¸ºtaræ–‡ä»¶</span><br><span class="line">docker save -o IMAGE_NAME IMAGE_ID</span><br><span class="line">eg.docker save -o ubuntu_14.04.tar ubuntu:14.04</span><br></pre></td></tr></table></figure>

<h3 id="3-13-è½½å…¥é•œåƒ-load"><a href="#3-13-è½½å…¥é•œåƒ-load" class="headerlink" title="3.13 è½½å…¥é•œåƒ load"></a>3.13 è½½å…¥é•œåƒ load</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># å¯¼å…¥è‡ªå®šä¹‰é•œåƒ</span><br><span class="line">docker load -i TAR_FILE</span><br><span class="line">eg.docker load --input ubuntu_14.04.tar</span><br></pre></td></tr></table></figure>

<h3 id="â€”â€”â€”â€”â€”â€”â€”â€”â€”-2"><a href="#â€”â€”â€”â€”â€”â€”â€”â€”â€”-2" class="headerlink" title="â€”â€”â€”â€”â€”â€”â€”â€”â€”"></a>â€”â€”â€”â€”â€”â€”â€”â€”â€”</h3><h3 id="4-æ•°æ®å·"><a href="#4-æ•°æ®å·" class="headerlink" title="4. æ•°æ®å·"></a>4. æ•°æ®å·</h3><p>æ•°æ®å·æ˜¯ä¸€ä¸ªå¯ä¾›ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒç»•è¿‡ UFSï¼Œå¯ä»¥æä¾›å¾ˆå¤šæœ‰ç”¨çš„ç‰¹æ€§ï¼š</p>
<ul>
<li>æ•°æ®å·å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«å’Œé‡ç”¨</li>
<li>å¯¹æ•°æ®å·çš„ä¿®æ”¹ä¼šç«‹é©¬ç”Ÿæ•ˆ</li>
<li>å¯¹æ•°æ®å·çš„æ›´æ–°ï¼Œä¸ä¼šå½±å“é•œåƒ</li>
<li>å·ä¼šä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨</li>
</ul>
<p>*æ•°æ®å·çš„ä½¿ç”¨ï¼Œç±»ä¼¼äº Linux ä¸‹å¯¹ç›®å½•æˆ–æ–‡ä»¶è¿›è¡Œ mountã€‚</p>
<h3 id="4-1-åˆ›å»ºæ•°æ®å·"><a href="#4-1-åˆ›å»ºæ•°æ®å·" class="headerlink" title="4.1 åˆ›å»ºæ•°æ®å·"></a>4.1 åˆ›å»ºæ•°æ®å·</h3><p>åœ¨ç”¨ <code>docker run</code> å‘½ä»¤çš„æ—¶å€™ï¼Œä½¿ç”¨ <code>-v</code> æ ‡è®°æ¥åˆ›å»ºä¸€ä¸ªæ•°æ®å·å¹¶æŒ‚è½½åˆ°å®¹å™¨é‡Œã€‚åœ¨ä¸€æ¬¡ run ä¸­å¤šæ¬¡ä½¿ç”¨å¯ä»¥æŒ‚è½½å¤šä¸ªæ•°æ®å·ã€‚</p>
<p>ä¸‹é¢åˆ›å»ºä¸€ä¸ª web å®¹å™¨ï¼Œå¹¶åŠ è½½ä¸€ä¸ªæ•°æ®å·åˆ°å®¹å™¨çš„ <code>/webapp</code> ç›®å½•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -P --name web -v &#x2F;webapp training&#x2F;webapp python app.py</span><br></pre></td></tr></table></figure>

<h3 id="4-2-æŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºæ–‡ä»¶ä½œä¸ºæ•°æ®å·"><a href="#4-2-æŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºæ–‡ä»¶ä½œä¸ºæ•°æ®å·" class="headerlink" title="4.2 æŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºæ–‡ä»¶ä½œä¸ºæ•°æ®å·"></a>4.2 æŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºæ–‡ä»¶ä½œä¸ºæ•°æ®å·</h3><p><code>-v</code> æ ‡è®°ä¹Ÿå¯ä»¥ä»ä¸»æœºæŒ‚è½½å•ä¸ªæ–‡ä»¶åˆ°å®¹å™¨ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run --rm -it -v ~&#x2F;.bash_history:&#x2F;.bash_history ubuntu &#x2F;bin&#x2F;bash</span><br></pre></td></tr></table></figure>

<h3 id="4-3-æ•°æ®å·å®¹å™¨"><a href="#4-3-æ•°æ®å·å®¹å™¨" class="headerlink" title="4.3 æ•°æ®å·å®¹å™¨"></a>4.3 æ•°æ®å·å®¹å™¨</h3><p>å¦‚æœä½ æœ‰ä¸€äº›æŒç»­æ›´æ–°çš„æ•°æ®éœ€è¦åœ¨å®¹å™¨ä¹‹é—´å…±äº«ï¼Œæœ€å¥½åˆ›å»ºæ•°æ®å·å®¹å™¨ã€‚</p>
<p>æ•°æ®å·å®¹å™¨ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ­£å¸¸çš„å®¹å™¨ï¼Œä¸“é—¨ç”¨æ¥æä¾›æ•°æ®å·ä¾›å…¶å®ƒå®¹å™¨æŒ‚è½½çš„ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªå‘½åçš„æ•°æ®å·å®¹å™¨ dbdataï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -v &#x2F;dbdata --name dbdata training&#x2F;postgres echo Data-only container for postgres</span><br></pre></td></tr></table></figure>

<p>å…¶ä»–å®¹å™¨ä¸­ä½¿ç”¨ <code>--volumes-from</code> æ¥æŒ‚è½½ dbdata å®¹å™¨ä¸­çš„æ•°æ®å·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --volumes-from dbdata --name db1 training&#x2F;postgres</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä½¿ç”¨å¤šä¸ª <code>--volumes-from</code> å‚æ•°æ¥ä»å¤šä¸ªå®¹å™¨æŒ‚è½½å¤šä¸ªæ•°æ®å·</p>
<p>æ³¨æ„ï¼šä½¿ç”¨ <code>--volumes-from</code> å‚æ•°æ‰€æŒ‚è½½æ•°æ®å·çš„å®¹å™¨è‡ªå·±å¹¶ä¸éœ€è¦ä¿æŒåœ¨è¿è¡ŒçŠ¶æ€ã€‚</p>
<h3 id="4-4-åˆ©ç”¨æ•°æ®å·å®¹å™¨æ¥å¤‡ä»½ã€æ¢å¤ã€è¿ç§»æ•°æ®å·"><a href="#4-4-åˆ©ç”¨æ•°æ®å·å®¹å™¨æ¥å¤‡ä»½ã€æ¢å¤ã€è¿ç§»æ•°æ®å·" class="headerlink" title="4.4 åˆ©ç”¨æ•°æ®å·å®¹å™¨æ¥å¤‡ä»½ã€æ¢å¤ã€è¿ç§»æ•°æ®å·"></a>4.4 åˆ©ç”¨æ•°æ®å·å®¹å™¨æ¥å¤‡ä»½ã€æ¢å¤ã€è¿ç§»æ•°æ®å·</h3><p>å¤‡ä»½</p>
<p>é¦–å…ˆä½¿ç”¨ <code>--volumes-from</code> æ ‡è®°æ¥åˆ›å»ºä¸€ä¸ªåŠ è½½ dbdata å®¹å™¨å·çš„å®¹å™¨ï¼Œå¹¶ä»æœ¬åœ°ä¸»æœºæŒ‚è½½å½“å‰åˆ°å®¹å™¨çš„ /backup ç›®å½•ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --volumes-from dbdata -v $(pwd):&#x2F;backup ubuntu tar cvf &#x2F;backup&#x2F;backup.tar &#x2F;dbdata</span><br></pre></td></tr></table></figure>

<p>å®¹å™¨å¯åŠ¨åï¼Œä½¿ç”¨äº† <code>tar</code> å‘½ä»¤æ¥å°† dbdata å·å¤‡ä»½ä¸ºæœ¬åœ°çš„ <code>/backup/backup.tar</code>ã€‚</p>
<p>æ¢å¤</p>
<p>å¦‚æœè¦æ¢å¤æ•°æ®åˆ°ä¸€ä¸ªå®¹å™¨ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªå¸¦æœ‰æ•°æ®å·çš„å®¹å™¨ dbdata2ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -v &#x2F;dbdata --name dbdata2 ubuntu &#x2F;bin&#x2F;bash</span><br></pre></td></tr></table></figure>

<p>ç„¶ååˆ›å»ºå¦ä¸€ä¸ªå®¹å™¨ï¼ŒæŒ‚è½½ dbdata2 çš„å®¹å™¨ï¼Œå¹¶ä½¿ç”¨ <code>untar</code> è§£å‹å¤‡ä»½æ–‡ä»¶åˆ°æŒ‚è½½çš„å®¹å™¨å·ä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run --volumes-from dbdata2 -v $(pwd):&#x2F;backup busybox tar xvf</span><br><span class="line">&#x2F;backup&#x2F;backup.tar</span><br></pre></td></tr></table></figure>

<h3 id="â€”â€”â€”â€”â€”â€”â€”â€”â€”-3"><a href="#â€”â€”â€”â€”â€”â€”â€”â€”â€”-3" class="headerlink" title="â€”â€”â€”â€”â€”â€”â€”â€”â€”"></a>â€”â€”â€”â€”â€”â€”â€”â€”â€”</h3><h3 id="5-ç½‘ç»œ"><a href="#5-ç½‘ç»œ" class="headerlink" title="5.ç½‘ç»œ"></a>5.ç½‘ç»œ</h3><h3 id="5-1å¤–éƒ¨è®¿é—®å®¹å™¨"><a href="#5-1å¤–éƒ¨è®¿é—®å®¹å™¨" class="headerlink" title="5.1å¤–éƒ¨è®¿é—®å®¹å™¨"></a>5.1å¤–éƒ¨è®¿é—®å®¹å™¨</h3><p>å®¹å™¨ä¸­å¯ä»¥è¿è¡Œä¸€äº›ç½‘ç»œåº”ç”¨ï¼Œè¦è®©å¤–éƒ¨ä¹Ÿå¯ä»¥è®¿é—®è¿™äº›åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡ <code>-P</code> æˆ– <code>-p</code> å‚æ•°æ¥æŒ‡å®šç«¯å£æ˜ å°„ã€‚</p>
<p>å½“ä½¿ç”¨ -P æ ‡è®°æ—¶ï¼ŒDocker ä¼šéšæœºæ˜ å°„ä¸€ä¸ª <code>49000~49900</code> çš„ç«¯å£åˆ°å†…éƒ¨å®¹å™¨å¼€æ”¾çš„ç½‘ç»œç«¯å£ã€‚</p>
<p>ä½¿ç”¨ <code>docker ps</code> å¯ä»¥çœ‹åˆ°ï¼Œæœ¬åœ°ä¸»æœºçš„ 49155 è¢«æ˜ å°„åˆ°äº†å®¹å™¨çš„ 5000 ç«¯å£ã€‚æ­¤æ—¶è®¿é—®æœ¬æœºçš„ 49155 ç«¯å£å³å¯è®¿é—®å®¹å™¨å†… web åº”ç”¨æä¾›çš„ç•Œé¢ã€‚</p>
<p>eg.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -P training&#x2F;webapp python app.py</span><br></pre></td></tr></table></figure>

<p>-pï¼ˆå°å†™çš„ï¼‰åˆ™å¯ä»¥æŒ‡å®šè¦æ˜ å°„çš„ç«¯å£ï¼Œå¹¶ä¸”ï¼Œåœ¨ä¸€ä¸ªæŒ‡å®šç«¯å£ä¸Šåªå¯ä»¥ç»‘å®šä¸€ä¸ªå®¹å™¨ã€‚æ”¯æŒçš„æ ¼å¼æœ‰```</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip:hostPort:containerPort | ip::containerPort | hostPort:containerPort</span><br></pre></td></tr></table></figure>

<h3 id="5-2-æ˜ å°„æ‰€æœ‰æ¥å£åœ°å€"><a href="#5-2-æ˜ å°„æ‰€æœ‰æ¥å£åœ°å€" class="headerlink" title="5.2 æ˜ å°„æ‰€æœ‰æ¥å£åœ°å€"></a>5.2 æ˜ å°„æ‰€æœ‰æ¥å£åœ°å€</h3><p>ä½¿ç”¨ <code>hostPort:containerPort</code> æ ¼å¼æœ¬åœ°çš„ 5000 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 5000 ç«¯å£ï¼Œå¯ä»¥æ‰§è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run -d -p 5000:5000 training&#x2F;webapp python app.py</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶é»˜è®¤ä¼šç»‘å®šæœ¬åœ°æ‰€æœ‰æ¥å£ä¸Šçš„æ‰€æœ‰åœ°å€ã€‚</p>
<h3 id="5-3-æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„æŒ‡å®šç«¯å£"><a href="#5-3-æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„æŒ‡å®šç«¯å£" class="headerlink" title="5.3 æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„æŒ‡å®šç«¯å£"></a>5.3 æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„æŒ‡å®šç«¯å£</h3><p>å¯ä»¥ä½¿ç”¨ <code>ip:hostPort:containerPort</code> æ ¼å¼æŒ‡å®šæ˜ å°„ä½¿ç”¨ä¸€ä¸ªç‰¹å®šåœ°å€ï¼Œæ¯”å¦‚ localhost åœ°å€ 127.0.0.1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run -d -p 127.0.0.1:5000:5000 training&#x2F;webapp python app.py</span><br></pre></td></tr></table></figure>

<h3 id="5-4-æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„ä»»æ„ç«¯å£"><a href="#5-4-æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„ä»»æ„ç«¯å£" class="headerlink" title="5.4 æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„ä»»æ„ç«¯å£"></a>5.4 æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„ä»»æ„ç«¯å£</h3><p>ä½¿ç”¨ <code>ip::containerPort</code> ç»‘å®š localhost çš„ä»»æ„ç«¯å£åˆ°å®¹å™¨çš„ 5000 ç«¯å£ï¼Œæœ¬åœ°ä¸»æœºä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªç«¯å£ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run -d -p 127.0.0.1::5000 training&#x2F;webapp python app.py</span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥ä½¿ç”¨ udp æ ‡è®°æ¥æŒ‡å®š udp ç«¯å£</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run -d -p 127.0.0.1:5000:5000&#x2F;udp training&#x2F;webapp python app.py</span><br></pre></td></tr></table></figure>

<h3 id="5-5-æŸ¥çœ‹æ˜ å°„ç«¯å£é…ç½®"><a href="#5-5-æŸ¥çœ‹æ˜ å°„ç«¯å£é…ç½®" class="headerlink" title="5.5 æŸ¥çœ‹æ˜ å°„ç«¯å£é…ç½®"></a>5.5 æŸ¥çœ‹æ˜ å°„ç«¯å£é…ç½®</h3><p>ä½¿ç”¨ <code>docker port</code> æ¥æŸ¥çœ‹å½“å‰æ˜ å°„çš„ç«¯å£é…ç½®ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹åˆ°ç»‘å®šçš„åœ°å€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker port nostalgic_morse 5000</span><br><span class="line">127.0.0.1:49155.</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>å®¹å™¨æœ‰è‡ªå·±çš„å†…éƒ¨ç½‘ç»œå’Œ ip åœ°å€ï¼ˆä½¿ç”¨ <code>docker inspect</code> å¯ä»¥è·å–æ‰€æœ‰çš„å˜é‡ï¼ŒDocker è¿˜å¯ä»¥æœ‰ä¸€ä¸ªå¯å˜çš„ç½‘ç»œé…ç½®ã€‚ï¼‰</li>
<li>-p æ ‡è®°å¯ä»¥å¤šæ¬¡ä½¿ç”¨æ¥ç»‘å®šå¤šä¸ªç«¯å£</li>
</ul>
<p>ä¾‹å¦‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run -d -p 5000:5000  -p 3000:80 training&#x2F;webapp python app.py</span><br></pre></td></tr></table></figure>

<h3 id="5-6-å®¹å™¨äº’è”"><a href="#5-6-å®¹å™¨äº’è”" class="headerlink" title="5.6 å®¹å™¨äº’è”"></a>5.6 å®¹å™¨äº’è”</h3><p>å®¹å™¨çš„è¿æ¥ï¼ˆlinkingï¼‰ç³»ç»Ÿæ˜¯é™¤äº†ç«¯å£æ˜ å°„å¤–ï¼Œå¦ä¸€ç§è·Ÿå®¹å™¨ä¸­åº”ç”¨äº¤äº’çš„æ–¹å¼ã€‚</p>
<p>è¯¥ç³»ç»Ÿä¼šåœ¨æºå’Œæ¥æ”¶å®¹å™¨ä¹‹é—´åˆ›å»ºä¸€ä¸ªéš§é“ï¼Œæ¥æ”¶å®¹å™¨å¯ä»¥çœ‹åˆ°æºå®¹å™¨æŒ‡å®šçš„ä¿¡æ¯ã€‚</p>
<p>ğŸ”—é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="http://www.dockerinfo.net/%e4%bd%bf%e7%94%a8%e7%bd%91%e7%bb%9c">http://www.dockerinfo.net/%e4%bd%bf%e7%94%a8%e7%bd%91%e7%bb%9c</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/10/11/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94docker/" data-id="ckn0fva3t000chltd5eqdhrz5" data-title="æ—¥å¸¸ç¬”è®°â€”â€”docker" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/03/18/%E5%B0%8F%E5%9E%8B%E9%87%91%E8%9E%8D%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94neo4j/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          å°å‹é‡‘èçŸ¥è¯†å›¾è°±å®è·µâ€”â€”neo4j
        
      </div>
    </a>
  
  
    <a href="/2020/09/17/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B9%B3%E5%8F%B0%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94Google%20Colaboratory/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">æ·±åº¦å­¦ä¹ å¹³å°å®è·µâ€”â€”Google Colaboratory</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Django/">Django</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Notes/">Notes</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Others/">Others</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SQL/">SQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/idea/">idea</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nosql/">nosql</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/04/07/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94ES%20&%20Kibana%20&%20Logstash/">æ—¥å¸¸ç¬”è®°â€”â€”ES &amp; Kibana &amp; Logstash</a>
          </li>
        
          <li>
            <a href="/2021/04/06/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Sentry/">æ—¥å¸¸ç¬”è®°â€”â€”Sentry</a>
          </li>
        
          <li>
            <a href="/2021/04/02/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94urljoin/">æ—¥å¸¸ç¬”è®°â€”â€”urljoin</a>
          </li>
        
          <li>
            <a href="/2021/04/01/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94k8s/">æ—¥å¸¸ç¬”è®°â€”â€”k8s</a>
          </li>
        
          <li>
            <a href="/2021/04/01/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Python/">æ—¥å¸¸ç¬”è®°â€”â€”Python</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 Jimmy Guo<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>